/*
 * Wallaby.js - v1.0.963
 * https://wallabyjs.com
 * Copyright (c) 2014-2020 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
function HTML(e){Base.call(this,e);var t,i,n=this,r=this.stats,s=(e.total,fragment(statsTemplate)),o=s.getElementsByTagName("li"),a=o[1].getElementsByTagName("em")[0],l=o[1].getElementsByTagName("a")[0],c=o[2].getElementsByTagName("em")[0],u=o[2].getElementsByTagName("a")[0],h=o[3].getElementsByTagName("em")[0],f=s.getElementsByTagName("canvas")[0],d=fragment('<ul id="mocha-report"></ul>'),p=[d],g=document.getElementById("mocha");if(f.getContext){var v=window.devicePixelRatio||1;f.style.width=f.width,f.style.height=f.height,f.width*=v,f.height*=v,i=f.getContext("2d"),i.scale(v,v),t=new Progress}return g?(on(l,"click",function(){unhide();var e=/pass/.test(d.className)?"":" pass";d.className=d.className.replace(/fail|pass/g,"")+e,d.className.trim()&&hideSuitesWithout("test pass")}),on(u,"click",function(){unhide();var e=/fail/.test(d.className)?"":" fail";d.className=d.className.replace(/fail|pass/g,"")+e,d.className.trim()&&hideSuitesWithout("test fail")}),g.appendChild(s),g.appendChild(d),t&&t.size(40),e.on("suite",function(e){if(!e.root){var t=n.suiteURL(e),i=fragment('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,escape(e.title));p[0].appendChild(i),p.unshift(document.createElement("ul")),i.appendChild(p[0])}}),e.on("suite end",function(e){e.root||p.shift()}),e.on("fail",function(t,i){"hook"==t.type&&e.emit("test end",t)}),void e.on("test end",function(e){var s=r.tests/this.total*100|0;t&&t.update(s).draw(i);var o=new Date-r.start;if(text(a,r.passes),text(c,r.failures),text(h,(o/1e3).toFixed(2)),"passed"==e.state)var l=n.testURL(e),u=fragment('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">‣</a></h2></li>',e.speed,e.title,e.duration,l);else if(e.pending)var u=fragment('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var u=fragment('<li class="test fail"><h2>%e <a href="%e" class="replay">‣</a></h2></li>',e.title,n.testURL(e)),f=e.err.stack||e.err.toString();~f.indexOf(e.err.message)||(f=e.err.message+"\n"+f),"[object Error]"==f&&(f=e.err.message),!e.err.stack&&e.err.sourceURL&&void 0!==e.err.line&&(f+="\n("+e.err.sourceURL+":"+e.err.line+")"),u.appendChild(fragment('<pre class="error">%e</pre>',f))}if(!e.pending){var d=u.getElementsByTagName("h2")[0];on(d,"click",function(){g.style.display="none"==g.style.display?"block":"none"});var g=fragment("<pre><code>%e</code></pre>",utils.clean(e.fn.toString()));u.appendChild(g),g.style.display="none"}p[0]&&p[0].appendChild(u)})):error("#mocha div missing, add it to your document")}function error(e){document.body.appendChild(fragment('<div id="mocha-error">%s</div>',e))}function fragment(e){var t=arguments,i=document.createElement("div"),n=1;return i.innerHTML=e.replace(/%([se])/g,function(e,i){switch(i){case"s":return String(t[n++]);case"e":return escape(t[n++])}}),i.firstChild}function hideSuitesWithout(e){for(var t=document.getElementsByClassName("suite"),i=0;i<t.length;i++){var n=t[i].getElementsByClassName(e);0==n.length&&(t[i].className+=" hidden")}}function unhide(){for(var e=document.getElementsByClassName("suite hidden"),t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function text(e,t){e.textContent?e.textContent=t:e.innerText=t}function on(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}var Base=require("./base"),utils=require("../utils"),Progress=require("../browser/progress"),escape=utils.escape,Date=global.Date,setTimeout=global.setTimeout,setInterval=global.setInterval,clearTimeout=global.clearTimeout,clearInterval=global.clearInterval;exports=module.exports=HTML;var statsTemplate='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>',makeUrl=function(e){var t=window.location.search;return window.location.pathname+(t?t+"&":"?")+"grep="+encodeURIComponent(e)};HTML.prototype.suiteURL=function(e){return makeUrl(e.fullTitle())},HTML.prototype.testURL=function(e){return makeUrl(e.fullTitle())};