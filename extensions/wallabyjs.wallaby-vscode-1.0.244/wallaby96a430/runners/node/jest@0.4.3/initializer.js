/*
 * Wallaby.js - v1.0.963
 * https://wallabyjs.com
 * Copyright (c) 2014-2020 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
var path=require("path"),fs=require("graceful-fs"),Q=require("q"),TestRunner,utils,transform,tracer=global.$_$tracer,testRunner,testFiles,testFilesByPath,jestInstalled=!1,EVAL_RESULT_VARIABLE="Object.<anonymous>",jestCliPath="jest-cli",jestRunnerModulePath,transformPath=jestCliPath+"/src/lib/transform",installCommonGlobalsPath,frozenConfig=!1,compactScriptPreprocessor=!1,jasmineFrameworkVersion,localProjectRoot,instrumentedRoot=process.cwd(),inlineSnapshotsSourceFileName="inline_snapshots";global._mergeSetupScript="",global._setupTestFrameworkScriptFile="",process.env.FORCE_COLOR=0,process.env.JEST_WORKER_ID=tracer.workerId;try{localProjectRoot=path.dirname(global.wallaby._localNodeModules),!global.wallaby._localNodeModules||process.env.NODE_PATH&&~process.env.NODE_PATH.indexOf(global.wallaby._localNodeModules)||(process.env.NODE_PATH=(process.env.NODE_PATH?process.env.NODE_PATH+path.delimiter:"")+global.wallaby._localNodeModules);var oldRequireResolve,oldLoader=require.extensions[".js"],oldReadFileSync=require("fs").readFileSync;require("fs").readFileSync=function(e){var t=e.replace(/\\/g,"/"),i=oldReadFileSync.apply(this,arguments);if(~t.indexOf(inlineSnapshotsSourceFileName)){var n=i.replace("_callee$property$loc$.column","0").replace("const {line, column} = callee.property.loc.start;","const {line, column} = callee.property.loc.start; column = 0;");n===i&&console.warn("Possibly incompatible Jest version (inline_snapshots)"),i=n}else{if(~t.indexOf("jest-jasmine2/build/jasmine/Env.js"))return i=i.replace("oldListenersException = process","oldListenersException = (j$.process || process)").replace("oldListenersRejection = process","oldListenersRejection = (j$.process || process)");~t.indexOf("jest-snapshot/build/State.js")&&(i=i.replace("hasSnapshot && this._updateSnapshot === 'all'","hasSnapshot && (!global.$_$tracer._updateNoMoreThanOneSnapshotPerTestFileRun || !pass && (this.updated === 0)) && this._updateSnapshot === 'all'").replace("this._updateSnapshot === 'all' && this._uncheckedKeys.size","this._updateSnapshot === 'all' && (!global.$_$tracer._updateNoMoreThanOneSnapshotPerTestFileRun || (this.updated === 0)) && this._uncheckedKeys.size"))}return i},require.extensions[".js"]=function(e,t){var i,n,r=t.replace(/\\/g,"/");return~r.indexOf("jest-runtime/build/transform")||~r.indexOf("jest-runtime/build/ScriptTransformer")||~r.indexOf("jest-runtime/build/script_transformer")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("const cache = new Map();","const cache = new Map();global._jestRuntimeCache = cache;").replace(/.readFileSync\(\s*filename,\s*'utf8'\s*\)/,".readFileSync(filename, 'utf8')+(filename === global._setupTestFrameworkScriptFile ? global._mergeSetupScript : \"\")"),n===i&&console.warn("Possibly incompatible Jest version (jest-runtime/build/transform|ScriptTransformer)"),e._compile(n,t)):~r.indexOf("@jest/transform/build/ScriptTransformer")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("this._cache = projectCache;","this._cache = projectCache;global._jestRuntimeCache = projectCache.transformedFiles;").replace(/.readFileSync\(\s*filename,\s*'utf8'\s*\)/,".readFileSync(filename, 'utf8')+(filename === global._setupTestFrameworkScriptFile ? global._mergeSetupScript : \"\")"),n===i&&console.warn("Possibly incompatible Jest version (@jest/transform/build/ScriptTransformer)"),e._compile(n,t)):~r.indexOf("jest-runner/build/index.js")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("process.env.JEST_WORKER_ID = '1';",""),e._compile(n,t)):~r.indexOf("jest-resolve/build/defaultResolver.js")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("const checkedPaths = new Map();","const checkedPaths = new Map(); checkedPaths.get = function(){};"),e._compile(n,t)):~r.indexOf("react-native/jest/assetFileTransformer")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("path.relative(__dirname, filename)",'path.relative(__dirname.replace("'+localProjectRoot+'", "'+process.cwd()+'"), filename)'),n===i&&console.warn("Possibly incompatible Jest version (react-native/jest/assetFileTransformer)"),e._compile(n,t)):~r.indexOf("jest-message-util")?(i=require("fs").readFileSync(t,"utf8"),e._compile(i.replace("renderedCallsite + stacktrace",'"" + stacktrace').replace("`${renderedCallsite}\\n${stacktrace}`","stacktrace"),t)):~r.indexOf("buffered_console")||~r.indexOf("Console")?(i=require("fs").readFileSync(t,"utf8"),~i.indexOf("BufferedConsole")||~i.indexOf("CustomConsole")?e._compile(i.replace("error() {","error() {$_$tracer._error.apply($_$tracer, arguments);").replace("error(firstArg, ...rest) {","error(firstArg, ...rest) {$_$tracer._reportConsoleErrorAsError && $_$tracer._error.apply($_$tracer, arguments);"),t):oldLoader(e,t)):~r.indexOf("source-map-support/source-map-support")?(i=require("fs").readFileSync(t,"utf8"),e._compile(i.replace("function mapSourcePosition(position) {",'function mapSourcePosition(position) {if(position && position.source && ~position.source.replace(/\\\\/g, "/").indexOf("vue-jest/lib/process")) return position;').replace("retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);","retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);retrieveSourceMap = handlerExec(retrieveMapHandlers);retrieveFile = handlerExec(retrieveFileHandlers);"),t)):~r.indexOf("ts-jest/dist/utils")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("if (configPath === path.join(getStartDir()",'if (configPath === path.join("'+localProjectRoot+'"'),e._compile(n,t)):~r.indexOf("fast_path.js")?(i=require("fs").readFileSync(t,"utf8"),n=~i.indexOf("_path")?i.replace("relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0","relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0 || _path().default.isAbsolute(relativeFilename)"):i.replace("relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0","relativeFilename.indexOf(INDIRECTION_FRAGMENT) === 0 || path().isAbsolute(relativeFilename)"),e._compile(n,t)):~r.indexOf("installCommonGlobals.js")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("(globalObject, globals) {","(globalObject, globals) {\n        if (!globalObject.$_$tracer) {\n          if (!globalObject.regeneratorRuntime && global.regeneratorRuntime) {\n            globalObject.regeneratorRuntime = global.regeneratorRuntime;\n          }\n          globalObject.$_$wp = global.$_$wp;\n          globalObject.$_$wpe = global.$_$wpe;\n          globalObject.$_$w = global.$_$w;\n          globalObject.$_$w_ = global.$_$w_;\n          globalObject.$_$wf = global.$_$wf;\n          globalObject.$_$wv = global.$_$wv;\n          globalObject.$_$tracer = global.$_$tracer;\n          global.$_$tracer.setEnvGlobal(globalObject);\n          globalObject.$_$tracer._jasmineAdapter = new global.$_$tracer.Jasmine2Reporter(global.$_$tracer);\n        }\n      "),e._compile(n,t)):~r.indexOf("resolve/lib/node-modules-paths.js")?(i=require("fs").readFileSync(t,"utf8"),n=i.replace("paths.push(parsed.dir);","if (parsed.dir === "+JSON.stringify(path.dirname(instrumentedRoot))+") break; paths.push(parsed.dir);"),e._compile(n,t)):oldLoader(e,t)};var rootPathFromTestingFramework=function(e){return global.wallaby._testFrameworkPath?path.join(path.dirname(global.wallaby._testFrameworkPath),e):e},findModule=function(e,t,i){try{var n=e+t,r=require(rootPathFromTestingFramework(n));return i&&i(e,t,r["default"]?r["default"]:r),!0}catch(s){return!1}},foundTestRunner=function(e,t,i){jestCliPath=e,TestRunner=i};if(findModule("react-scripts/node_modules/jest-cli","/build/TestRunner",foundTestRunner)||findModule("react-scripts/node_modules/jest-cli","/build/test_scheduler",foundTestRunner)||findModule("react-scripts/node_modules/jest-cli","/build/TestScheduler",foundTestRunner)||findModule("react-scripts/node_modules/jest/node_modules/jest-cli","/build/TestRunner",foundTestRunner)||findModule("react-scripts/node_modules/jest/node_modules/jest-cli","/build/test_scheduler",foundTestRunner)||findModule("react-scripts/node_modules/jest/node_modules/jest-cli","/build/TestScheduler",foundTestRunner)||findModule("jest-cli/node_modules/@jest/core","/build/TestScheduler",foundTestRunner)||findModule("jest/node_modules/jest-cli/node_modules/@jest/core","/build/TestScheduler",foundTestRunner)||findModule("@jest/core","/build/TestScheduler",foundTestRunner)||findModule("jest-cli","/build/TestRunner",foundTestRunner)||findModule("jest-cli","/build/TestScheduler",foundTestRunner)||findModule("jest-cli","/build/test_scheduler",foundTestRunner)||findModule("jest-cli","/src/TestRunner",foundTestRunner)||findModule("jest/node_modules/jest-cli","/build/TestRunner",foundTestRunner)||findModule("jest/node_modules/jest-cli","/build/test_scheduler",foundTestRunner)||findModule("jest/node_modules/jest-cli","/build/TestScheduler",foundTestRunner),!TestRunner)throw new Error("Cannot find Jest test runner");var foundJestRunnerModule=function(e){jestRunnerModulePath=e};if(findModule(jestCliPath+"/node_modules/jest-runner","",foundJestRunnerModule)||findModule(path.join(jestCliPath,"../jest-runner"),"",foundJestRunnerModule)||findModule("jest-runner","",foundJestRunnerModule),jestRunnerModulePath){var jestRuntimeDeepPath=jestRunnerModulePath+"/node_modules/jest-runtime",jestRuntimeShallowPath=path.join(jestRunnerModulePath,"../jest-runtime"),removeDirsAboveInstrumentedRootAndAppendLocalNodeModules=function(e){if(!e||!e[0]||!~e[0].indexOf(instrumentedRoot))return e;for(var t=[],i=!1,n=path.dirname(e[0]),r=function(e){t.push(e),t.push(e.replace(instrumentedRoot,localProjectRoot))},s=0;s<e.length;s++){var o=e[s];if(o){var a=path.dirname(o);if(!i){var l=n===a;n=path.dirname(a),l?~a.indexOf(instrumentedRoot)&&r(o):i=!0}i&&r(o)}}return t},foundJestResolveNodeModules=function(e,t){var i=e+t,n=require.cache[require.resolve(i)].exports;n=n["default"]||n;var r=function(e,t){var i=(n.apply(this,arguments)||[]).slice(),r=removeDirsAboveInstrumentedRootAndAppendLocalNodeModules(i);if(!(e&&t&&t.paths&&t.paths.length))return r;var s=i.length&&i[i.length-1]===t.paths[t.paths.length-1];if(s)return r;var o,a,l={};for(o=0;o<t.paths.length;o++){var c=t.paths[o];l[c]=!0,~e.indexOf(c)&&(a=!0)}if(!a)return r;var u={},h=[];for(o=r.length-1;o>=0;o--){var f=r[o];l[f]?u[f]||(h.unshift(f),u[f]=!0):h.unshift(f)}return h};r["default"]=r,require.cache[require.resolve(i)].exports=r};if(!(findModule(jestRuntimeDeepPath+"/node_modules/jest-resolve","/build/node_modules_paths",foundJestResolveNodeModules)||findModule(jestRuntimeDeepPath+"/node_modules/jest-resolve","/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeDeepPath,"../jest-resolve"),"/build/node_modules_paths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeDeepPath,"../jest-resolve"),"/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(jestRuntimeShallowPath+"/node_modules/jest-resolve","/build/node_modules_paths",foundJestResolveNodeModules)||findModule(jestRuntimeShallowPath+"/node_modules/jest-resolve","/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeShallowPath,"../jest-resolve"),"/build/node_modules_paths",foundJestResolveNodeModules)||findModule(path.join(jestRuntimeShallowPath,"../jest-resolve"),"/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(jestRunnerModulePath+"/node_modules/jest-resolve","/build/node_modules_paths",foundJestResolveNodeModules)||findModule(jestRunnerModulePath+"/node_modules/jest-resolve","/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule(path.join(jestRunnerModulePath,"../jest-resolve"),"/build/node_modules_paths",foundJestResolveNodeModules)||findModule(path.join(jestRunnerModulePath,"../jest-resolve"),"/build/nodeModulesPaths",foundJestResolveNodeModules)||findModule("jest-resolve","/build/node_modules_paths",foundJestRunnerModule)||findModule("jest-resolve","/build/nodeModulesPaths",foundJestRunnerModule)))throw new Error("Cannot find node_modules_paths")}var jestConfigModule,foundNormalizedConfig=function(e,t,i){utils={normalizeConfig:i};var n=utils.normalizeConfig;utils.normalizeConfig=function(){var e=n.apply(this,arguments);return utils.cachedNormalizedConfig=e,e},jestConfigModule=e},patchJestConfig=function(e,t,i){foundNormalizedConfig(e,t,i),jestConfigModule=require(jestConfigModule),jestConfigModule=jestConfigModule["default"]||jestConfigModule;var n=jestConfigModule.normalize;jestConfigModule.normalize=function(){return utils.cachedNormalizedConfig?utils.cachedNormalizedConfig:n.apply(this,arguments)}};findModule(jestCliPath,"/src/lib/utils",function(e,t,i){utils=i})||findModule(jestCliPath,"/src/config/normalize",foundNormalizedConfig)||(findModule(jestCliPath+"/node_modules/jest-config","/build/normalize",patchJestConfig)||findModule(path.join(jestCliPath,"../jest-config"),"/build/normalize",patchJestConfig)||findModule("jest-config","/build/normalize",patchJestConfig),jestRunnerModulePath&&(findModule(jestRunnerModulePath+"/node_modules/jest-config","/build/normalize",patchJestConfig)||findModule(path.join(jestRunnerModulePath,"../jest-config"),"/build/normalize",patchJestConfig)));var foundBaseReporter=function(e,t,i){var n=i.prototype;n.log=n._write=function(e){console.log(e+"\n")}},foundDefaultReporter=function(e,t,i){var n=i.prototype;n._clearWaitingOn=function(){}},foundSummaryReporter=function(e,t,i){var n=i.prototype;n.log=n._write=function(e){}};findModule(jestCliPath,"/build/reporters/BaseReporter",foundBaseReporter)&&findModule(jestCliPath,"/build/reporters/DefaultReporter",foundDefaultReporter)||findModule(jestCliPath,"/build/reporters/base_reporter",foundBaseReporter),findModule(jestCliPath,"/build/reporters/summary_reporter",foundSummaryReporter),findModule(jestCliPath,"/../reporters/build/base_reporter",foundBaseReporter),findModule(jestCliPath,"/../reporters/build/summary_reporter",foundSummaryReporter);var initCommonGlobalsInstall=function(e){installCommonGlobalsPath=e};if(!(findModule(jestCliPath+"/src/environments/installCommonGlobals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/build/install_common_globals","",initCommonGlobalsInstall)||findModule(path.join(jestCliPath+"/../jest-util/build/install_common_globals"),"",initCommonGlobalsInstall)||findModule("jest-util/build/install_common_globals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/build/installCommonGlobals","",initCommonGlobalsInstall)||findModule(path.join(jestCliPath+"/../jest-util/build/installCommonGlobals"),"",initCommonGlobalsInstall)||findModule("jest-util/build/installCommonGlobals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/src/installCommonGlobals","",initCommonGlobalsInstall)||findModule("jest-util/src/installCommonGlobals","",initCommonGlobalsInstall)||findModule(jestCliPath+"/node_modules/jest-util/lib/installCommonGlobals","",initCommonGlobalsInstall)||findModule("jest-util/lib/installCommonGlobals","",initCommonGlobalsInstall)))throw new Error("Can not find install_common_globals path");compactScriptPreprocessor=frozenConfig=!TestRunner.prototype._loadConfigDependencies;try{transformPath=jestCliPath+"/src/lib/transform",transform=require(transformPath)}catch(e){}jestInstalled=!0}catch(e){tracer.start(function(){tracer.reportGlobalError("Failed to initialize wallaby jest.\n"+(e.stack||""))}),module.exports={init:function(){return{configure:function(){}}}}}var initializeTestsByFilePath=function(){testFilesByPath||(testFilesByPath={},global.$_$testFiles.forEach(function(e){testFilesByPath[e.path]=e}))},remapInlineSnapshot=function(e){if(e.frame){var t=testFilesByPath[path.normalize(e.frame.file)];if(t){var i=t.path,n=t.originalType;i&&n&&(i=setOriginalFileTypePath(i,n)),i=i.replace(process.cwd(),localProjectRoot),e.frame.file=i,t.lineMap&&(e.frame.line=tracer._utils.getOriginalLineByGeneratedLine(t.lineMap,e.frame.line,e.frame.column)||e.frame.line,e.frame.column=1)}}},setOriginalFileTypePath=function(e,t){var i=e.split(".");return i.length>=2&&(i[i.length-1]=t,e=i.join(".")),e},jasmineVersion=function(e){return!e||e.testRunner&&!~e.testRunner.indexOf("jasmine2")?1:2},sameSession=function(e){return e._wallabySession===global.$_$session},setSession=function(e){e._wallabySession=global.$_$session},JasmineReporter=function(e){var t=e.initialSpecId();this.reportRunnerStarting=function(){},this.reportRunnerResults=function(){global.$_$initialSpecId=t+1},this.reportSpecStarting=function(i){i.id=++t,e.specStart(i.id,i.description),i.results_.time=(new e._Date).getTime()},this.reportSpecResults=function(t){for(var i=e.specEnd(),n=0===t.results_.failedCount,r=t.results_.skipped,s=r?"disabled":"executed",o={id:t.id,timeRange:i,name:t.description,suite:[],status:s,time:r?0:(new e._Date).getTime()-t.results_.time,log:[]},a=t.suite;a;)o.suite.unshift(a.description),a=a.parentSuite;if(!n&&!r)for(var l=t.results_.items_,c=0;c<l.length;c++){var u=l[c];u.passed_||(u.showDiff=u.showDiff||"toEqual"===u.matcherName,o.log.push(e.setAssertionData(u,{message:u.message,stack:u.trace&&u.trace.stack?u.trace.stack:e._undefined})))}o.log.length||delete o.log,e.result(o)},this.specFilter=function(t){if(!e.hasSpecFilter())return!0;for(var i=[t.description],n=t.suite;n;)i.unshift(n.description),n=n.parentSuite;return e.specFilter(i)}},Jasmine2Reporter=tracer.Jasmine2Reporter=function(e){var t=global.$_$session,i=e.initialSpecId(),n=[],r=function(){return t!==global.$_$session};this.jasmineDone=function(){r()||(global.$_$initialSpecId=i+1)},this.jasmineStarted=function(){r()||e.started({total:"unknown number of"})},this.suiteStarted=function(e){r()||n.push(e.description)},this.suiteDone=function(){r()||n.pop()},this.specStarted=function(t){r()||(t._id=++i,e.specStart(t._id,t.fullName),t._time=(new e._Date).getTime())},this.specDone=function(t){if(!r()){var i=e.specEnd(),s="passed"===t.status,o="disabled"===t.status||"pending"===t.status||"todo"===t.status,a=o?"pending"===t.status?"skipped":"todo"===t.status?"todo":"disabled"===t.status?"disabled":"executed":"executed",l={id:t._id,timeRange:i,name:t.description,suite:n.slice(),status:a,time:o?0:(new e._Date).getTime()-t._time,log:[],testFile:t._testFile};if(!s&&!o)for(var c=t.failedExpectations,u=0;u<c.length;u++){var h=c[u];if(h.error){if(h.message&&0===h.message.indexOf("Error: expect(")){var f=h.message.split("\n");f.shift(),f[0]&&0!==f[0].length||f.shift(),h.message=f.join("\n")}h.error.matcherResult?(h.matcherName=h.error.matcherResult.name,h.actual=h.error.matcherResult.actual,h.expected=h.error.matcherResult.expected):(h.showDiff=h.error.showDiff,h.actual=h.error.actual,h.expected=h.error.expected)}h.showDiff=h.showDiff||"toEqual"===h.matcherName||"toBe"===h.matcherName||"toMatchSnapshot"===h.matcherName||"toMatchInlineSnapshot"===h.matcherName||"toThrowErrorMatchingSnapshot"===h.matcherName,l.log.push(e.setAssertionData(h,{message:h.message,stack:h.stack}))}l.log.length||delete l.log,e.result(l)}}};if(jestInstalled){var nodeFs=require("fs"),originalWriteFileSync=nodeFs.writeFileSync;originalWriteFileSync.alreadyReplaced||(nodeFs.writeFileSync=function(e,t,i){try{if(".snap"===path.extname(e)&&0===e.indexOf(global.wallaby.projectCacheDir)){var n=require("fs-extra"),r=path.join(global.wallaby.localProjectDir,path.relative(global.wallaby.projectCacheDir,e));r&&(n.ensureDirSync(path.dirname(r)),originalWriteFileSync(r,t,i))}}catch(s){console.error(s.stack)}return originalWriteFileSync(e,t,i)},nodeFs.writeFileSync.alreadyReplaced=!0);var jasmineInitializerPath={1:path.join(__dirname,"jasmineInitializer.js"),2:path.join(__dirname,"jasmine2Initializer.js")},jasmineInitializerCode={1:"\n"+fs.readFileSync(jasmineInitializerPath[1]),2:"\n"+fs.readFileSync(jasmineInitializerPath[2])};if(utils.runContentWithLocalBindings=function(e,t,i,n){var r=+new Date;if(global.$_$tracer&&global.$_$tracer.isInitialized()){var s=Object.keys(n);e.global&&e.runSourceText('this["'+EVAL_RESULT_VARIABLE+'"] = function ('+s.join(",")+") {"+t+"\n};",i);var o=e.global?e.global[EVAL_RESULT_VARIABLE]:e("(function("+s.join(",")+"){"+t+"\n})",i);e.global&&delete e.global[EVAL_RESULT_VARIABLE];var a=s.map(function(e){return n[e]});o.apply(null,a);var l=+new Date;tracer.debugLog("Loaded "+(global.wallaby?i.replace(global.wallaby.localProjectDir,"").replace(global.wallaby.projectCacheDir,""):i)+" in "+(l-r)+" milliseconds")}},utils.readAndPreprocessFileContent=function(e,t){var i=fs.readFileSync(e,"utf8");if("#!"===i.substr(0,2)&&(i=i.replace(/^#!.*/,"")),t.scriptPreprocessor&&!t.preprocessorIgnorePatterns.some(function(t){if(t)return t.test||(t=new RegExp(t)),t.test(e)}))try{i=compactScriptPreprocessor?require(t.scriptPreprocessor).process(i,e,t):require(t.scriptPreprocessor).process(i,e,{},[],t)}catch(n){throw n.message=t.scriptPreprocessor+": "+n.message,n}return global._mergeSetupScript&&t.setupTestFrameworkScriptFile===e&&(i+=global._mergeSetupScript),i},transform&&(require.cache[require.resolve(transformPath)].exports=utils.readAndPreprocessFileContent),installCommonGlobalsPath){var originalInstallCommonGlobals=require.cache[require.resolve(rootPathFromTestingFramework(installCommonGlobalsPath))].exports;originalInstallCommonGlobals=originalInstallCommonGlobals["default"]||originalInstallCommonGlobals;var newInstallCommonGlobals=function(e,t){e.$_$tracer||(!e.regeneratorRuntime&&global.regeneratorRuntime&&(e.regeneratorRuntime=global.regeneratorRuntime),e.$_$wp=global.$_$wp,e.$_$wpe=global.$_$wpe,e.$_$w=global.$_$w,e.$_$w_=global.$_$w_,e.$_$wf=global.$_$wf,e.$_$wv=global.$_$wv,e.$_$tracer=global.$_$tracer,global.$_$tracer.setEnvGlobal(e),e.$_$tracer._jasmineAdapter=1===jasmineFrameworkVersion?new JasmineReporter(global.$_$tracer):new Jasmine2Reporter(global.$_$tracer)),originalInstallCommonGlobals(e,t)};newInstallCommonGlobals["default"]=newInstallCommonGlobals,require.cache[require.resolve(rootPathFromTestingFramework(installCommonGlobalsPath))].exports=newInstallCommonGlobals;var foundJestUtil=function(e,t,i){i.installCommonGlobals=newInstallCommonGlobals};findModule(jestCliPath+"/node_modules/jest-util","",foundJestUtil),findModule(path.join(jestCliPath+"/../jest-util"),"",foundJestUtil),findModule(path.join(installCommonGlobalsPath,"../.."),"",foundJestUtil),findModule("jest-util","",foundJestUtil),findModule("jest-environment-jsdom/node_modules/jest-util","",foundJestUtil),findModule("jest-environment-node/node_modules/jest-util","",foundJestUtil),findModule("jest-config/node_modules/jest-util","",foundJestUtil),findModule("jest-environment-jsdom-thirteen/node_modules/jest-util","",foundJestUtil),jestRunnerModulePath&&(findModule(jestRunnerModulePath+"/node_modules/jest-util","",foundJestUtil),findModule(path.join(jestRunnerModulePath,"/../jest-util"),"",foundJestUtil))}TestRunner.prototype._loadConfigDependencies=function(){var e=this._config;if(null===this._configDeps){this._configDeps={ModuleLoader:require(e.moduleLoader),testRunner:require(e.testRunner).bind(null)};var t=require(e.testEnvironment);this._configDeps.testEnvironment=function(e){var i=new t(e);return i.global.$_$wp=global.$_$wp,i.global.$_$wpe=global.$_$wpe,i.global.$_$w=global.$_$w,i.global.$_$wf=global.$_$wf,i.global.$_$tracer=global.$_$tracer,i.global.$_$tracer._jasmineAdapter=1===jasmineFrameworkVersion?new JasmineReporter(global.$_$tracer):new Jasmine2Reporter(global.$_$tracer),i}}return this._configDeps};var WallabyReporter_1=function(e){this._completeRun=e};WallabyReporter_1.prototype={onRunStart:function(){},onTestStart:function(){},getLastError:function(){return this._error},_setError:function(e){this._error=e},onTestResult:function(e,t){t.testExecError&&sameSession(this)&&(tracer.reportGlobalError(t.testExecError),this._completeRun())},onRunComplete:function(e,t){!tracer.canUpdateSnapshots()&&t&&t.testResults&&t.testResults.forEach&&t.testResults.forEach(function(e){if(e&&e.snapshot&&e.snapshot.unchecked){var t=e.snapshot.unchecked+" snapshot"+(e.snapshot.unchecked>1?"s":"")+" obsolete "+(e.snapshot.uncheckedKeys&&"\n\t"+e.snapshot.uncheckedKeys.join("\n\t")||"");tracer.reportGlobalErrorObject({message:t,stack:t+"\n    at "+e.testFilePath+":1:0",snapshot:!0,allowNotMappedStackLines:!0})}}),this._completeRun()},on:function(){},setState:function(){},isInterrupted:function(){return!1},isWatchMode:function(){return!1}},tracer.start(function(){if(!testRunner){var e;try{e=require(path.join(localProjectRoot,"jest.config"))}catch(t){}if(!e)try{e=require(path.join(localProjectRoot,"package.json")).jest}catch(t){}configure(e)}testFilesByPath=void 0;var i=global.$_$session;testRunner.then(function(e){if(i===global.$_$session){var t=!1,n=e._config||e._globalConfig;n.config&&n.config.rootDir&&(n=n.config),n.updateSnapshot=tracer.canUpdateSnapshots()?"all":process.env.CI?"none":e._globalConfig?"new":void 0;var r=function(e){!t&&sameSession({_wallabySession:i})&&(t=!0,tracer.resetEnvGlobal(),tracer.complete(e))},s=new WallabyReporter_1(r);setSession(s),e.removeReporter&&e.removeReporter(WallabyReporter_1),e.addReporter&&e.addReporter(s);var o=e.scheduleTests,a=o?e.scheduleTests.bind(e):e.runTests.bind(e);Q.when().then(function(){return!n.globalSetup||require(n.globalSetup)()}).then(function(){return a(e._globalConfig?testFiles.map(function(t){return{context:e._wallabyContext,path:t}}):testFiles,s).then(function(){return Q.when().then(function(){return!n.globalTeardown||require(n.globalTeardown)()})}).then(function(){r()},function(e){e&&console.error(e.stack),r()})})}})["catch"](function(e){console.error("Error while trying to initialize jest: "+(e&&e.message||""))})});var replaceProjectDir=function(e){if("[object String]"!==Object.prototype.toString.call(e)||~e.indexOf("node_modules"))return e;var t=e.replace(/^\.\//,"<rootDir>/").replace("<rootDir>",global.wallaby.projectCacheDir),i=path.normalize(t);return~i.indexOf(path.normalize(global.wallaby.projectCacheDir))?t:e},replaceProjectDirInAllRelevantConfigValues=function(e){for(var t=["moduleNameMapper","moduleDirectories","modulePaths","setupTestFrameworkScriptFile","setupFiles","setupFilesAfterEnv","snapshotSerializers","transform","globalSetup","globalTeardown"],i=0,n=t.length;i<n;i++){var r=t[i],s=e[r];if(s){var o=Object.prototype.toString.call(s);switch(o){case"[object Array]":for(var a=0;a<s.length;a++)s[a]=replaceProjectDir(s[a]);break;case"[object Object]":for(var l in s)s.hasOwnProperty(l)&&(s[l]=replaceProjectDir(s[l]));break;case"[object String]":e[r]=replaceProjectDir(s)}}}},configure=function(e){e=e||{},delete e.scriptPreprocessor,delete e.testFileExtensions,delete e.testDirectoryName,e.notify=!1,e.bail=!1,e.collectCoverage=!1,e.rootDir=e.rootDir&&path.resolve(localProjectRoot,e.rootDir.replace(process.cwd(),localProjectRoot))||localProjectRoot||process.cwd(),e.name=e.rootDir.replace(/[\/\\]|\s/g,"-"),e.cache=e.cache!==!1,e.globals=e.globals||{},e.globals["ts-jest"]=e.globals["ts-jest"]||{},e.globals["ts-jest"].diagnostics=!1,replaceProjectDirInAllRelevantConfigValues(e),foundJestUtil&&e.testEnvironment&&findModule(e.testEnvironment+"/node_modules/jest-util","",foundJestUtil),e=utils.normalizeConfig(e,{}),e.config&&e.config.rootDir&&(e=e.config),e.options&&e.options.rootDir&&(e=e.options);try{e.testEnvironment=require.resolve("jest-config/node_modules/"+e.testEnvironment)}catch(t){}if(e.moduleFileExtensions&&e.moduleFileExtensions.length){var i=[],n=[];e.moduleFileExtensions.forEach(function(e,t){"js"!==e&&"jsx"!==e||(i.unshift(t),n.unshift(e))}),i.forEach(function(t){e.moduleFileExtensions.splice(t,1)}),n.forEach(function(t){e.moduleFileExtensions.unshift(t)})}if(e.modulePaths&&e.modulePaths.length)for(var r=0;r<e.modulePaths.length;r++){var s=e.modulePaths[r];s&&~s.indexOf(e.rootDir)&&!~s.indexOf(localProjectRoot)&&(e.modulePaths[r]=s.replace(e.rootDir,process.cwd()))}if(jasmineFrameworkVersion=jasmineVersion(e),e.setupTestFrameworkScriptFile?(global._setupTestFrameworkScriptFile=e.setupTestFrameworkScriptFile,global._mergeSetupScript=jasmineInitializerCode[jasmineFrameworkVersion]):e.setupTestFrameworkScriptFile=jasmineInitializerPath[jasmineFrameworkVersion],e.setupFilesAfterEnv&&(delete e.setupTestFrameworkScriptFile,delete global._setupTestFrameworkScriptFile,delete global._mergeSetupScript,e.setupFilesAfterEnv.unshift(jasmineInitializerPath[jasmineFrameworkVersion])),e.maxWorkers=1,e.verbose=!1,e.cwd=process.cwd(),"prettier"===e.prettierPath)try{e.prettierPath=require.resolve(path.join(localProjectRoot,"node_modules/prettier"))}catch(t){}var o,a,l,c;try{var u=function(e,t,i){c=i,a=c.buildHasteMap||c.createHasteContext||c.createContext};findModule(jestCliPath+"/node_modules/jest-runtime","",u)||findModule(path.join(jestCliPath+"/../jest-runtime"),"",u)||findModule("jest-runtime","",u),jestRunnerModulePath&&(findModule(jestRunnerModulePath+"/node_modules/jest-runtime","",u)||findModule(path.join(jestRunnerModulePath+"/../jest-runtime"),"",u));var h={maxWorkers:1};if(process.env.NO_WATCHMAN&&(h.watchman=!1),o=a(e,h),l=!!o.then,c.prototype){var f=c.prototype.requireModule;f._wallabyReplaced||(f._wallabyReplaced=!0,c.prototype.requireModule=function(e,t,i){var n=f.apply(this,arguments);if(e&&~e.replace(/\\/g,"/").indexOf("jest-snapshot"))if("./utils"===t&&n.getSnapshotPath&&!n.getSnapshotPath._replaced){initializeTestsByFilePath();var r=n.getSnapshotPath;n.getSnapshotPath=function(){var e=arguments[0],t=(testFilesByPath[path.normalize(e)]||{}).originalType;return e&&t&&(e=setOriginalFileTypePath(e,t)),arguments[0]=e,r.apply(this,arguments)},n.getSnapshotPath._replaced=!0}else if("./snapshot_resolver"===t&&n.buildSnapshotResolver&&!n.buildSnapshotResolver._replaced){initializeTestsByFilePath();var s=n.buildSnapshotResolver;n.buildSnapshotResolver=function(){var e=s.apply(this,arguments),t=e.resolveSnapshotPath;return e.resolveSnapshotPath=function(){var e=arguments[0],i=(testFilesByPath[path.normalize(e)]||{}).originalType;return e&&i&&(e=setOriginalFileTypePath(e,i)),arguments[0]=e,t.apply(this,arguments)},e},n.buildSnapshotResolver._replaced=!0}else if(t==="./"+inlineSnapshotsSourceFileName&&n.saveInlineSnapshots&&!n.saveInlineSnapshots._replaced){initializeTestsByFilePath();var o=n.saveInlineSnapshots;n.saveInlineSnapshots=function(){var e=arguments[0];return e.forEach(remapInlineSnapshot),o.apply(this,arguments)},n.saveInlineSnapshots._replaced=!0}return n})}else console.error("Error while trying to integrate with jest-snapshot")}catch(t){console.error("Error while trying to initialize jest: "+t.message)}TestRunner.length>4&&console.warn("Possibly incompatible Jest version (TestRunner)");var d=function(e){var t=e._mocks||e._raw&&e._raw.mocks;if(!t)return void console.warn("Failed to process Jest mocks");var i=function(e){return"[object Map]"===Object.prototype.toString.call(e)?{forEach:function(t){e.forEach(function(e,i){t(i)})},get:function(t){return e.get(t)},set:function(t,i){e.set(t,i)}}:{forEach:function(t){for(var i in e)t(i)},get:function(t){return e[t]},set:function(t,i){e[t]=i}}},n=i(t);n.forEach(function(t){var i=n.get(t);if(i&&"string"==typeof i){i=i.split(".");var r=i[i.length-1];"ts"!==r&&"tsx"!==r||(i[i.length-1]="js"),i=i.join("."),i=i.replace(localProjectRoot,global.wallaby.projectCacheDir),e._raw&&e._raw.rootDir&&(i=path.join(global.wallaby.projectCacheDir,i)),fs.existsSync(i)&&n.set(t,e._raw&&e._raw.rootDir?path.relative(e._raw.rootDir,i):i)}});var r=e._raw&&e._raw.map;if(r){var s=i(r);s.forEach(function(e){var t=s.get(e);if(t)for(var i in t){var n=t[i];if(n&&"string"==typeof n[0]&&n[0]!==path.join(localProjectRoot,"package.json")&&!~n[0].indexOf("node_modules")){var r=n[0].replace(localProjectRoot,global.wallaby.projectCacheDir);fs.existsSync(r)&&(n[0]=r)}}})}};testRunner=TestRunner.length>=3&&"TestScheduler"!==TestRunner.name?l?o.then(function(t){return Q.when(new TestRunner(t,e,{runInBand:!0,maxWorkers:1,getTestSummary:function(){return""}}))}):Q.when(new TestRunner(o,e,{runInBand:!0,maxWorkers:1})):l?o.then(function(t){t.moduleMap&&d(t.moduleMap);var i=new TestRunner(e,{runInBand:!0,maxWorkers:1,pattern:{
input:""}});return i._wallabyContext=t,Q.when(i)}):Q.when(new TestRunner(e,{runInBand:!0,maxWorkers:1}))};module.exports={init:function(e){var t=global._jestRuntimeCache;return t&&t.forEach(function(e,i){~i.indexOf(global.$_$baseDir)&&t["delete"](i)}),testFiles=e,{configure:function(e){testRunner||configure(e)}}}}}