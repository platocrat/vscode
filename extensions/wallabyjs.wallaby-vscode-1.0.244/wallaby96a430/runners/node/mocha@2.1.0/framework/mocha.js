/*
 * Wallaby.js - v1.0.963
 * https://wallabyjs.com
 * Copyright (c) 2014-2020 Wallaby.js - All Rights Reserved.
 *
 * This source code file is a part of Wallaby.js and is a proprietary (closed source) software.

 * IMPORTANT:
 * Wallaby.js is a tool made by software developers for software developers with passion and love for what we do.
 * Pirating the tool is not only illegal and just morally wrong,
 * it is also unfair to other fellow programmers who are using it legally,
 * and very harmful for the tool and its future.
 */
!function(){function e(t){var i=e.resolve(t),n=e.modules[i];if(!n)throw new Error('failed to require "'+t+'"');return n.exports||(n.exports={},n.call(n.exports,n,n.exports,e.relative(i))),n.exports}function t(){for(var e=(new n).getTime();h.length&&(new n).getTime()-e<100;)h.shift()();u=h.length?r(t,0):null}e.modules={},e.resolve=function(t){var i=t,n=t+".js",r=t+"/index.js";return e.modules[n]&&n||e.modules[r]&&r||i},e.register=function(t,i){e.modules[t]=i},e.relative=function(t){return function(i){if("."!=i.charAt(0))return e(i);var n=t.split("/"),r=i.split("/");n.pop();for(var s=0;s<r.length;s++){var o=r[s];".."==o?n.pop():"."!=o&&n.push(o)}return e(n.join("/"))}},e.register("browser/debug.js",function(e,t,i){e.exports=function(e){return function(){}}}),e.register("browser/diff.js",function(e,t,i){var n=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){for(var t=[],i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t}function i(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")}var n=function(e){this.ignoreWhitespace=e};n.prototype={diff:function(t,i){if(i===t)return[{value:i}];if(!i)return[{value:t,removed:!0}];if(!t)return[{value:i,added:!0}];i=this.tokenize(i),t=this.tokenize(t);var n=i.length,r=t.length,s=n+r,o=[{newPos:-1,components:[]}],a=this.extractCommon(o[0],i,t,0);if(o[0].newPos+1>=n&&a+1>=r)return o[0].components;for(var l=1;l<=s;l++)for(var c=-1*l;c<=l;c+=2){var u,h=o[c-1],f=o[c+1];a=(f?f.newPos:0)-c,h&&(o[c-1]=void 0);var d=h&&h.newPos+1<n,p=f&&0<=a&&a<r;if(d||p){!d||p&&h.newPos<f.newPos?(u=e(f),this.pushComponent(u.components,t[a],void 0,!0)):(u=e(h),u.newPos++,this.pushComponent(u.components,i[u.newPos],!0,void 0));var a=this.extractCommon(u,i,t,c);if(u.newPos+1>=n&&a+1>=r)return u.components;o[c]=u}else o[c]=void 0}},pushComponent:function(e,t,i,n){var r=e[e.length-1];r&&r.added===i&&r.removed===n?e[e.length-1]={value:this.join(r.value,t),added:i,removed:n}:e.push({value:t,added:i,removed:n})},extractCommon:function(e,t,i,n){for(var r=t.length,s=i.length,o=e.newPos,a=o-n;o+1<r&&a+1<s&&this.equals(t[o+1],i[a+1]);)o++,a++,this.pushComponent(e.components,t[o],void 0,void 0);return e.newPos=o,a},equals:function(e,t){var i=/\S/;return!(!this.ignoreWhitespace||i.test(e)||i.test(t))||e===t},join:function(e,t){return e+t},tokenize:function(e){return e}};var r=new n,s=new n((!0)),o=new n;s.tokenize=o.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var a=new n((!0));a.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var l=new n;return l.tokenize=function(e){for(var t=[],i=e.split(/^/m),n=0;n<i.length;n++){var r=i[n],s=i[n-1];"\n"==r&&s&&"\r"===s[s.length-1]?t[t.length-1]+="\n":r&&t.push(r)}return t},{Diff:n,diffChars:function(e,t){return r.diff(e,t)},diffWords:function(e,t){return s.diff(e,t)},diffWordsWithSpace:function(e,t){return o.diff(e,t)},diffLines:function(e,t){return l.diff(e,t)},diffCss:function(e,t){return a.diff(e,t)},createPatch:function(e,t,i,n,r){function s(e){return e.map(function(e){return" "+e})}function o(e,t,i){var n=c[c.length-2],r=t===c.length-2,s=t===c.length-3&&(i.added!==n.added||i.removed!==n.removed);/\n$/.test(i.value)||!r&&!s||e.push("\\ No newline at end of file")}var a=[];a.push("Index: "+e),a.push("==================================================================="),a.push("--- "+e+("undefined"==typeof n?"":"\t"+n)),a.push("+++ "+e+("undefined"==typeof r?"":"\t"+r));var c=l.diff(t,i);c[c.length-1].value||c.pop(),c.push({value:"",lines:[]});for(var u=0,h=0,f=[],d=1,p=1,g=0;g<c.length;g++){var v=c[g],y=v.lines||v.value.replace(/\n$/,"").split("\n");if(v.lines=y,v.added||v.removed){if(!u){var m=c[g-1];u=d,h=p,m&&(f=s(m.lines.slice(-4)),u-=f.length,h-=f.length)}f.push.apply(f,y.map(function(e){return(v.added?"+":"-")+e})),o(f,g,v),v.added?p+=y.length:d+=y.length}else{if(u)if(y.length<=8&&g<c.length-2)f.push.apply(f,s(y));else{var _=Math.min(y.length,4);a.push("@@ -"+u+","+(d-u+_)+" +"+h+","+(p-h+_)+" @@"),a.push.apply(a,f),a.push.apply(a,s(y.slice(0,_))),y.length<=4&&o(a,g,v),u=0,h=0,f=[]}d+=y.length,p+=y.length}}return a.join("\n")+"\n"},applyPatch:function(e,t){for(var i=t.split("\n"),n=[],r=!1,s=!1,o="I"===i[0][0]?4:0;o<i.length;o++)if("@"===i[o][0]){var a=i[o].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);n.unshift({start:a[3],oldlength:a[2],oldlines:[],newlength:a[4],newlines:[]})}else"+"===i[o][0]?n[0].newlines.push(i[o].substr(1)):"-"===i[o][0]?n[0].oldlines.push(i[o].substr(1)):" "===i[o][0]?(n[0].newlines.push(i[o].substr(1)),n[0].oldlines.push(i[o].substr(1))):"\\"===i[o][0]&&("+"===i[o-1][0]?r=!0:"-"===i[o-1][0]&&(s=!0));for(var l=e.split("\n"),o=n.length-1;o>=0;o--){for(var c=n[o],u=0;u<c.oldlength;u++)if(l[c.start-1+u]!==c.oldlines[u])return!1;Array.prototype.splice.apply(l,[c.start-1,+c.oldlength].concat(c.newlines))}if(r)for(;!l[l.length-1];)l.pop();else s&&l.push("");return l.join("\n")},convertChangesToXML:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.added?t.push("<ins>"):r.removed&&t.push("<del>"),t.push(i(r.value)),r.added?t.push("</ins>"):r.removed&&t.push("</del>")}return t.join("")},convertChangesToDMP:function(e){for(var t,i=[],n=0;n<e.length;n++)t=e[n],i.push([t.added?1:t.removed?-1:0,t.value]);return i}}}();"undefined"!=typeof e&&(e.exports=n)}),e.register("browser/escape-string-regexp.js",function(e,t,i){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}}),e.register("browser/events.js",function(e,t,i){function n(e){return"[object Array]"=={}.toString.call(e)}function r(){}t.EventEmitter=r,r.prototype.on=function(e,t){return this.$events||(this.$events={}),this.$events[e]?n(this.$events[e])?this.$events[e].push(t):this.$events[e]=[this.$events[e],t]:this.$events[e]=t,this},r.prototype.addListener=r.prototype.on,r.prototype.once=function(e,t){function i(){n.removeListener(e,i),t.apply(this,arguments)}var n=this;return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var i=this.$events[e];if(n(i)){for(var r=-1,s=0,o=i.length;s<o;s++)if(i[s]===t||i[s].listener&&i[s].listener===t){r=s;break}if(r<0)return this;i.splice(r,1),i.length||delete this.$events[e]}else(i===t||i.listener&&i.listener===t)&&delete this.$events[e]}return this},r.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},r.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),n(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},r.prototype.emit=function(e){if(!this.$events)return!1;var t=this.$events[e];if(!t)return!1;var i=[].slice.call(arguments,1);if("function"==typeof t)t.apply(this,i);else{if(!n(t))return!1;for(var r=t.slice(),s=0,o=r.length;s<o;s++)r[s].apply(this,i)}return!0}}),e.register("browser/fs.js",function(e,t,i){}),e.register("browser/glob.js",function(e,t,i){}),e.register("browser/path.js",function(e,t,i){}),e.register("browser/progress.js",function(e,t,i){function n(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}e.exports=n,n.prototype.size=function(e){return this._size=e,this},n.prototype.text=function(e){return this._text=e,this},n.prototype.fontSize=function(e){return this._fontSize=e,this},n.prototype.font=function(e){return this._font=e,this},n.prototype.update=function(e){return this.percent=e,this},n.prototype.draw=function(e){try{var t=Math.min(this.percent,100),i=this._size,n=i/2,r=n,s=n,o=n-1,a=this._fontSize;e.font=a+"px "+this._font;var l=2*Math.PI*(t/100);e.clearRect(0,0,i,i),e.strokeStyle="#9f9f9f",e.beginPath(),e.arc(r,s,o,0,l,!1),e.stroke(),e.strokeStyle="#eee",e.beginPath(),e.arc(r,s,o-1,0,l,!0),e.stroke();var c=this._text||(0|t)+"%",u=e.measureText(c).width;e.fillText(c,r-u/2+1,s+a/2-1)}catch(h){}return this}}),e.register("browser/tty.js",function(e,t,n){t.isatty=function(){return!0},t.getWindowSize=function(){return"innerHeight"in i?[i.innerHeight,i.innerWidth]:[640,480]}}),e.register("context.js",function(e,t,i){function n(){}e.exports=n,n.prototype.runnable=function(e){return 0==arguments.length?this._runnable:(this.test=this._runnable=e,this)},n.prototype.timeout=function(e){return 0===arguments.length?this.runnable().timeout():(this.runnable().timeout(e),this)},n.prototype.enableTimeouts=function(e){return this.runnable().enableTimeouts(e),this},n.prototype.slow=function(e){return this.runnable().slow(e),this},n.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_runnable"!=e&&"test"!=e)return t},2)}}),e.register("hook.js",function(e,t,i){function n(e,t){s.call(this,e,t),this.type="hook"}function r(){}var s=i("./runnable");e.exports=n,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n,n.prototype.error=function(e){if(0==arguments.length){var e=this._error;return this._error=null,e}this._error=e}}),e.register("interfaces/bdd.js",function(e,t,i){var n=i("../suite"),r=i("../test"),s=(i("../utils"),i("browser/escape-string-regexp"));e.exports=function(e){var t=[e];e.on("pre-require",function(e,i,o){e.before=function(e,i){t[0].beforeAll(e,i)},e.after=function(e,i){t[0].afterAll(e,i)},e.beforeEach=function(e,i){t[0].beforeEach(e,i)},e.afterEach=function(e,i){t[0].afterEach(e,i)},e.describe=e.context=function(e,r){var s=n.create(t[0],e);return s.file=i,t.unshift(s),r.call(s),t.shift(),s},e.xdescribe=e.xcontext=e.describe.skip=function(e,i){var r=n.create(t[0],e);r.pending=!0,t.unshift(r),i.call(r),t.shift()},e.describe.only=function(t,i){var n=e.describe(t,i);return o.grep(n.fullTitle()),n},e.it=e.specify=function(e,n){var s=t[0];s.pending&&(n=null);var o=new r(e,n);return o.file=i,s.addTest(o),o},e.it.only=function(t,i){var n=e.it(t,i),r="^"+s(n.fullTitle())+"$";return o.grep(new RegExp(r)),n},e.xit=e.xspecify=e.it.skip=function(t){e.it(t)}})}}),e.register("interfaces/exports.js",function(e,t,i){var n=i("../suite"),r=i("../test");e.exports=function(e){function t(e,s){var o;for(var a in e)if("function"==typeof e[a]){var l=e[a];switch(a){case"before":i[0].beforeAll(l);break;case"after":i[0].afterAll(l);break;case"beforeEach":i[0].beforeEach(l);break;case"afterEach":i[0].afterEach(l);break;default:var c=new r(a,l);c.file=s,i[0].addTest(c)}}else o=n.create(i[0],a),i.unshift(o),t(e[a]),i.shift()}var i=[e];e.on("require",t)}}),e.register("interfaces/index.js",function(e,t,i){t.bdd=i("./bdd"),t.tdd=i("./tdd"),t.qunit=i("./qunit"),t.exports=i("./exports")}),e.register("interfaces/qunit.js",function(e,t,i){var n=i("../suite"),r=i("../test"),s=i("browser/escape-string-regexp");i("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,i,o){e.before=function(e,i){t[0].beforeAll(e,i)},e.after=function(e,i){t[0].afterAll(e,i)},e.beforeEach=function(e,i){t[0].beforeEach(e,i)},e.afterEach=function(e,i){t[0].afterEach(e,i)},e.suite=function(e){t.length>1&&t.shift();var r=n.create(t[0],e);return r.file=i,t.unshift(r),r},e.suite.only=function(t,i){var n=e.suite(t,i);o.grep(n.fullTitle())},e.test=function(e,n){var s=new r(e,n);return s.file=i,t[0].addTest(s),s},e.test.only=function(t,i){var n=e.test(t,i),r="^"+s(n.fullTitle())+"$";o.grep(new RegExp(r))},e.test.skip=function(t){e.test(t)}})}}),e.register("interfaces/tdd.js",function(e,t,i){var n=i("../suite"),r=i("../test"),s=i("browser/escape-string-regexp");i("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,i,o){e.setup=function(e,i){t[0].beforeEach(e,i)},e.teardown=function(e,i){t[0].afterEach(e,i)},e.suiteSetup=function(e,i){t[0].beforeAll(e,i)},e.suiteTeardown=function(e,i){t[0].afterAll(e,i)},e.suite=function(e,r){var s=n.create(t[0],e);return s.file=i,t.unshift(s),r.call(s),t.shift(),s},e.suite.skip=function(e,i){var r=n.create(t[0],e);r.pending=!0,t.unshift(r),i.call(r),t.shift()},e.suite.only=function(t,i){var n=e.suite(t,i);o.grep(n.fullTitle())},e.test=function(e,n){var s=t[0];s.pending&&(n=null);var o=new r(e,n);return o.file=i,s.addTest(o),o},e.test.only=function(t,i){var n=e.test(t,i),r="^"+s(n.fullTitle())+"$";o.grep(new RegExp(r))},e.test.skip=function(t){e.test(t)}})}}),e.register("mocha.js",function(e,t,n){function r(e){return __dirname+"/../images/"+e+".png"}function o(e){e=e||{},this.files=[],this.options=e,this.grep(e.grep),this.suite=new t.Suite("",new t.Context),this.ui(e.ui),this.bail(e.bail),this.reporter(e.reporter,e.reporterOptions),null!=e.timeout&&this.timeout(e.timeout),this.useColors(e.useColors),null!==e.enableTimeouts&&this.enableTimeouts(e.enableTimeouts),e.slow&&this.slow(e.slow),this.suite.on("pre-require",function(e){t.afterEach=e.afterEach||e.teardown,t.after=e.after||e.suiteTeardown,t.beforeEach=e.beforeEach||e.setup,t.before=e.before||e.suiteSetup,t.describe=e.describe||e.suite,t.it=e.it||e.test,t.setup=e.setup||e.beforeEach,t.suiteSetup=e.suiteSetup||e.before,t.suiteTeardown=e.suiteTeardown||e.after,t.suite=e.suite||e.describe,t.teardown=e.teardown||e.afterEach,t.test=e.test||e.it})}var a=n("browser/path"),l=n("browser/escape-string-regexp"),c=n("./utils");if(t=e.exports=o,"undefined"!=typeof s&&"function"==typeof s.cwd){var u=a.join,h=s.cwd();e.paths.push(h,u(h,"node_modules"))}t.utils=c,t.interfaces=n("./interfaces"),t.reporters=n("./reporters"),t.Runnable=n("./runnable"),t.Context=n("./context"),t.Runner=n("./runner"),t.Suite=n("./suite"),t.Hook=n("./hook"),t.Test=n("./test"),o.prototype.bail=function(e){return 0==arguments.length&&(e=!0),this.suite.bail(e),this},o.prototype.addFile=function(e){return this.files.push(e),this},o.prototype.reporter=function(e,t){if("function"==typeof e)this._reporter=e;else{e=e||"spec";var i;try{i=n("./reporters/"+e)}catch(r){}if(!i)try{i=n(e)}catch(r){}if(i||"teamcity"!==e||console.warn("The Teamcity reporter was moved to a package named mocha-teamcity-reporter (https://npmjs.org/package/mocha-teamcity-reporter)."),!i)throw new Error('invalid reporter "'+e+'"');this._reporter=i}return this.options.reporterOptions=t,this},o.prototype.ui=function(e){if(e=e||"bdd",this._ui=t.interfaces[e],!this._ui)try{this._ui=n(e)}catch(i){}if(!this._ui)throw new Error('invalid interface "'+e+'"');return this._ui=this._ui(this.suite),this},o.prototype.loadFiles=function(e){var t=this,r=this.suite,s=this.files.length;this.files.forEach(function(o){o=a.resolve(o),r.emit("pre-require",i,o,t),r.emit("require",n(o),o,t),r.emit("post-require",i,o,t),--s||e&&e()})},o.prototype._growl=function(e,t){var i=n("growl");e.on("end",function(){var n=t.stats;if(n.failures){var s=n.failures+" of "+e.total+" tests failed";i(s,{name:"mocha",title:"Failed",image:r("error")})}else i(n.passes+" tests passed in "+n.duration+"ms",{name:"mocha",title:"Passed",image:r("ok")})})},o.prototype.grep=function(e){return this.options.grep="string"==typeof e?new RegExp(l(e)):e,this},o.prototype.invert=function(){return this.options.invert=!0,this},o.prototype.ignoreLeaks=function(e){return this.options.ignoreLeaks=!!e,this},o.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},o.prototype.growl=function(){return this.options.growl=!0,this},o.prototype.globals=function(e){return this.options.globals=(this.options.globals||[]).concat(e),this},o.prototype.useColors=function(e){return void 0!==e&&(this.options.useColors=e),this},o.prototype.useInlineDiffs=function(e){return this.options.useInlineDiffs=!(!arguments.length||void 0==e)&&e,this},o.prototype.timeout=function(e){return this.suite.timeout(e),this},o.prototype.slow=function(e){return this.suite.slow(e),this},o.prototype.enableTimeouts=function(e){return this.suite.enableTimeouts(!arguments.length||void 0===e||e),this},o.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},o.prototype.noHighlighting=function(){return this.options.noHighlighting=!0,this},o.prototype.run=function(e){function i(t){o.done?o.done(t,e):e(t)}this.files.length&&this.loadFiles();var n=this.suite,r=this.options;r.files=this.files;var s=new t.Runner(n),o=new this._reporter(s,r);return s.ignoreLeaks=!1!==r.ignoreLeaks,s.asyncOnly=r.asyncOnly,r.grep&&s.grep(r.grep,r.invert),r.globals&&s.globals(r.globals),r.growl&&this._growl(s,o),void 0!==r.useColors&&(t.reporters.Base.useColors=r.useColors),t.reporters.Base.inlineDiffs=r.useInlineDiffs,s.run(i)}}),e.register("ms.js",function(e,t,i){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return i*h;case"days":case"day":case"d":return i*u;case"hours":case"hour":case"h":return i*c;case"minutes":case"minute":case"m":return i*l;case"seconds":case"second":case"s":return i*a;case"ms":return i}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=l?Math.round(e/l)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function s(e){return o(e,u,"day")||o(e,c,"hour")||o(e,l,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}var a=1e3,l=60*a,c=60*l,u=24*c,h=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?s(e):r(e)}}),e.register("reporters/base.js",function(e,t,n){function r(e){var t=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},i=this.failures=[];e&&(this.runner=e,e.stats=t,e.on("start",function(){t.start=new y}),e.on("suite",function(e){t.suites=t.suites||0,e.root||t.suites++}),e.on("test end",function(e){t.tests=t.tests||0,t.tests++}),e.on("pass",function(e){t.passes=t.passes||0;var i=e.slow()/2;e.speed=e.duration>e.slow()?"slow":e.duration>i?"medium":"fast",t.passes++}),e.on("fail",function(e,n){t.failures=t.failures||0,t.failures++,e.err=n,i.push(e)}),e.on("end",function(){t.end=new y,t.duration=new y-t.start}),e.on("pending",function(){t.pending++}))}function o(e,t){return e=String(e),Array(t-e.length+1).join(" ")+e}function a(e,t){var i=c(e,"WordsWithSpace",t),n=i.split("\n");if(n.length>4){var r=String(n.length).length;i=n.map(function(e,t){return o(++t,r)+" | "+e}).join("\n")}return i="\n"+_("diff removed","actual")+" "+_("diff added","expected")+"\n\n"+i+"\n",i=i.replace(/^/gm,"      ")}function l(e,t){function i(e){return t&&(e=u(e)),"+"===e[0]?r+h("diff added",e):"-"===e[0]?r+h("diff removed",e):e.match(/\@\@/)?null:e.match(/\\ No newline/)?null:r+e}function n(e){return null!=e}var r="      ";msg=p.createPatch("string",e.actual,e.expected);var s=msg.split("\n").splice(4);return"\n      "+h("diff added","+ expected")+" "+h("diff removed","- actual")+"\n\n"+s.map(i).filter(n).join("\n")}function c(e,t,i){var n=i?u(e.actual):e.actual,r=i?u(e.expected):e.expected;return p["diff"+t](n,r).map(function(e){return e.added?h("diff added",e.value):e.removed?h("diff removed",e.value):e.value}).join("")}function u(e){return e.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}function h(e,t){return t.split("\n").map(function(t){return _(e,t)}).join("\n")}function f(e,t){return e=Object.prototype.toString.call(e),t=Object.prototype.toString.call(t),e==t}var d=n("browser/tty"),p=n("browser/diff"),g=n("../ms"),v=n("../utils"),y=i.Date,m=(i.setTimeout,i.setInterval,i.clearTimeout,i.clearInterval,d.isatty(1)&&d.isatty(2));t=e.exports=r,t.useColors=m||void 0!==s.env.MOCHA_COLORS,t.inlineDiffs=!1,t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},t.symbols={ok:"✓",err:"✖",dot:"․"},"win32"==s.platform&&(t.symbols.ok="√",t.symbols.err="×",t.symbols.dot=".");var _=t.color=function(e,i){return t.useColors?"["+t.colors[e]+"m"+i+"[0m":String(i)};t.window={width:m?s.stdout.getWindowSize?s.stdout.getWindowSize(1)[0]:d.getWindowSize()[1]:75},t.cursor={hide:function(){m&&s.stdout.write("[?25l")},show:function(){m&&s.stdout.write("[?25h")},deleteLine:function(){m&&s.stdout.write("[2K")},beginningOfLine:function(){m&&s.stdout.write("[0G")},CR:function(){m?(t.cursor.deleteLine(),t.cursor.beginningOfLine()):s.stdout.write("\r")}},t.list=function(e){console.log(),e.forEach(function(e,i){var n=_("error title","  %s) %s:\n")+_("error message","     %s")+_("error stack","\n%s\n"),r=e.err,s=r.message||"",o=r.stack||s,c=o.indexOf(s)+s.length,u=o.slice(0,c),h=r.actual,d=r.expected,p=!0;if(r.uncaught&&(u="Uncaught "+u),r.showDiff&&f(h,d)){"string"!=typeof h&&(p=!1,r.actual=h=v.stringify(h),r.expected=d=v.stringify(d)),n=_("error title","  %s) %s:\n%s")+_("error stack","\n%s\n");var g=s.match(/^([^:]+): expected/);u="\n      "+_("error message",g?g[1]:u),u+=t.inlineDiffs?a(r,p):l(r,p)}o=o.slice(c?c+1:c).replace(/^/gm,"  "),console.log(n,i+1,e.fullTitle(),u,o)})},r.prototype.epilogue=function(){var e,t=this.stats;console.log(),e=_("bright pass"," ")+_("green"," %d passing")+_("light"," (%s)"),console.log(e,t.passes||0,g(t.duration)),t.pending&&(e=_("pending"," ")+_("pending"," %d pending"),console.log(e,t.pending)),t.failures&&(e=_("fail","  %d failing"),console.log(e,t.failures),r.list(this.failures),console.log()),console.log()}}),e.register("reporters/doc.js",function(e,t,i){function n(e){function t(){return Array(i).join("  ")}r.call(this,e);var i=(this.stats,e.total,2);e.on("suite",function(e){e.root||(++i,console.log('%s<section class="suite">',t()),++i,console.log("%s<h1>%s</h1>",t(),s.escape(e.title)),console.log("%s<dl>",t()))}),e.on("suite end",function(e){e.root||(console.log("%s</dl>",t()),--i,console.log("%s</section>",t()),--i)}),e.on("pass",function(e){console.log("%s  <dt>%s</dt>",t(),s.escape(e.title));var i=s.escape(s.clean(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",t(),i)}),e.on("fail",function(e,i){console.log('%s  <dt class="error">%s</dt>',t(),s.escape(e.title));var n=s.escape(s.clean(e.fn.toString()));console.log('%s  <dd class="error"><pre><code>%s</code></pre></dd>',t(),n),console.log('%s  <dd class="error">%s</dd>',t(),s.escape(i))})}var r=i("./base"),s=i("../utils");t=e.exports=n}),e.register("reporters/dot.js",function(e,t,i){function n(e){o.call(this,e);var t=this,i=(this.stats,.75*o.window.width|0),n=-1;e.on("start",function(){s.stdout.write("\n  ")}),e.on("pending",function(e){++n%i==0&&s.stdout.write("\n  "),s.stdout.write(a("pending",o.symbols.dot))}),e.on("pass",function(e){++n%i==0&&s.stdout.write("\n  "),"slow"==e.speed?s.stdout.write(a("bright yellow",o.symbols.dot)):s.stdout.write(a(e.speed,o.symbols.dot))}),e.on("fail",function(e,t){++n%i==0&&s.stdout.write("\n  "),s.stdout.write(a("fail",o.symbols.dot))}),e.on("end",function(){console.log(),t.epilogue()})}function r(){}var o=i("./base"),a=o.color;t=e.exports=n,r.prototype=o.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("reporters/html-cov.js",function(e,t,i){function n(e){var t=i("jade"),n=__dirname+"/templates/coverage.jade",l=a.readFileSync(n,"utf8"),c=t.compile(l,{filename:n}),u=this;o.call(this,e,!1),e.on("end",function(){s.stdout.write(c({cov:u.cov,coverageClass:r}))})}function r(e){return e>=75?"high":e>=50?"medium":e>=25?"low":"terrible"}var o=i("./json-cov"),a=i("browser/fs");t=e.exports=n}),e.register("reporters/html.js",function(e,t,n){function r(e){h.call(this,e);var t,i,n=this,r=this.stats,y=(e.total,o(v)),m=y.getElementsByTagName("li"),_=m[1].getElementsByTagName("em")[0],b=m[1].getElementsByTagName("a")[0],T=m[2].getElementsByTagName("em")[0],S=m[2].getElementsByTagName("a")[0],k=m[3].getElementsByTagName("em")[0],C=y.getElementsByTagName("canvas")[0],w=o('<ul id="mocha-report"></ul>'),x=[w],F=document.getElementById("mocha");if(C.getContext){var L=window.devicePixelRatio||1;C.style.width=C.width,C.style.height=C.height,C.width*=L,C.height*=L,i=C.getContext("2d"),i.scale(L,L),t=new d}return F?(u(b,"click",function(){l();var e=/pass/.test(w.className)?"":" pass";w.className=w.className.replace(/fail|pass/g,"")+e,w.className.trim()&&a("test pass")}),u(S,"click",function(){l();var e=/fail/.test(w.className)?"":" fail";w.className=w.className.replace(/fail|pass/g,"")+e,w.className.trim()&&a("test fail")}),F.appendChild(y),F.appendChild(w),t&&t.size(40),e.on("suite",function(e){if(!e.root){var t=n.suiteURL(e),i=o('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,p(e.title));x[0].appendChild(i),x.unshift(document.createElement("ul")),i.appendChild(x[0])}}),e.on("suite end",function(e){e.root||x.shift()}),e.on("fail",function(t,i){"hook"==t.type&&e.emit("test end",t)}),void e.on("test end",function(e){var s=r.tests/this.total*100|0;t&&t.update(s).draw(i);var a=new g-r.start;if(c(_,r.passes),c(T,r.failures),c(k,(a/1e3).toFixed(2)),"passed"==e.state)var l=n.testURL(e),h=o('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">‣</a></h2></li>',e.speed,e.title,e.duration,l);else if(e.pending)var h=o('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var h=o('<li class="test fail"><h2>%e <a href="%e" class="replay">‣</a></h2></li>',e.title,n.testURL(e)),d=e.err.stack||e.err.toString();~d.indexOf(e.err.message)||(d=e.err.message+"\n"+d),"[object Error]"==d&&(d=e.err.message),!e.err.stack&&e.err.sourceURL&&void 0!==e.err.line&&(d+="\n("+e.err.sourceURL+":"+e.err.line+")"),h.appendChild(o('<pre class="error">%e</pre>',d))}if(!e.pending){var p=h.getElementsByTagName("h2")[0];u(p,"click",function(){v.style.display="none"==v.style.display?"block":"none"});var v=o("<pre><code>%e</code></pre>",f.clean(e.fn.toString()));h.appendChild(v),v.style.display="none"}x[0]&&x[0].appendChild(h)})):s("#mocha div missing, add it to your document")}function s(e){document.body.appendChild(o('<div id="mocha-error">%s</div>',e))}function o(e){var t=arguments,i=document.createElement("div"),n=1;return i.innerHTML=e.replace(/%([se])/g,function(e,i){switch(i){case"s":return String(t[n++]);case"e":return p(t[n++])}}),i.firstChild}function a(e){for(var t=document.getElementsByClassName("suite"),i=0;i<t.length;i++){var n=t[i].getElementsByClassName(e);0==n.length&&(t[i].className+=" hidden")}}function l(){for(var e=document.getElementsByClassName("suite hidden"),t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function c(e,t){e.textContent?e.textContent=t:e.innerText=t}function u(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}var h=n("./base"),f=n("../utils"),d=n("../browser/progress"),p=f.escape,g=i.Date;i.setTimeout,i.setInterval,i.clearTimeout,i.clearInterval;t=e.exports=r;var v='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>',y=function(e){var t=window.location.search;return window.location.pathname+(t?t+"&":"?")+"grep="+encodeURIComponent(e)};r.prototype.suiteURL=function(e){return y(e.fullTitle())},r.prototype.testURL=function(e){return y(e.fullTitle())}}),e.register("reporters/index.js",function(e,t,i){t.Base=i("./base"),t.Dot=i("./dot"),t.Doc=i("./doc"),t.TAP=i("./tap"),t.JSON=i("./json"),t.HTML=i("./html"),t.List=i("./list"),t.Min=i("./min"),t.Spec=i("./spec"),t.Nyan=i("./nyan"),t.XUnit=i("./xunit"),t.Markdown=i("./markdown"),t.Progress=i("./progress"),t.Landing=i("./landing"),t.JSONCov=i("./json-cov"),t.HTMLCov=i("./html-cov"),t.JSONStream=i("./json-stream")}),e.register("reporters/json-cov.js",function(e,t,n){function r(e,t){var n=this,t=1==arguments.length||t;c.call(this,e);var r=[],a=[],u=[];e.on("test end",function(e){r.push(e)}),e.on("pass",function(e){u.push(e)}),e.on("fail",function(e){a.push(e)}),e.on("end",function(){var e=i._$jscoverage||{},c=n.cov=o(e);c.stats=n.stats,c.tests=r.map(l),c.failures=a.map(l),c.passes=u.map(l),t&&s.stdout.write(JSON.stringify(c,null,2))})}function o(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var i in e){var n=a(i,e[i]);t.files.push(n),t.hits+=n.hits,t.misses+=n.misses,t.sloc+=n.sloc}return t.files.sort(function(e,t){return e.filename.localeCompare(t.filename)}),t.sloc>0&&(t.coverage=t.hits/t.sloc*100),t}function a(e,t){var i={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};return t.source.forEach(function(e,n){n++,0===t[n]?(i.misses++,i.sloc++):void 0!==t[n]&&(i.hits++,i.sloc++),i.source[n]={source:e,coverage:void 0===t[n]?"":t[n]}}),i.coverage=i.hits/i.sloc*100,i}function l(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var c=n("./base");t=e.exports=r}),e.register("reporters/json-stream.js",function(e,t,i){function n(e){o.call(this,e);var t=this,i=(this.stats,e.total);e.on("start",function(){console.log(JSON.stringify(["start",{total:i}]))}),e.on("pass",function(e){console.log(JSON.stringify(["pass",r(e)]))}),e.on("fail",function(e,t){e=r(e),e.err=t.message,console.log(JSON.stringify(["fail",e]))}),e.on("end",function(){s.stdout.write(JSON.stringify(["end",t.stats]))})}function r(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var o=i("./base");o.color;t=e.exports=n}),e.register("reporters/json.js",function(e,t,i){function n(e){var t=this;a.call(this,e);var i=[],n=[],o=[],l=[];e.on("test end",function(e){i.push(e)}),e.on("pass",function(e){l.push(e)}),e.on("fail",function(e){o.push(e)}),e.on("pending",function(e){n.push(e)}),e.on("end",function(){var a={stats:t.stats,tests:i.map(r),pending:n.map(r),failures:o.map(r),passes:l.map(r)};e.testResults=a,s.stdout.write(JSON.stringify(a,null,2))})}function r(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration,err:o(e.err||{})}}function o(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(i){t[i]=e[i]},e),t}var a=i("./base");a.cursor,a.color;t=e.exports=n}),e.register("reporters/landing.js",function(e,t,i){function n(e){function t(){var e=Array(n).join("-");return"  "+l("runway",e)}o.call(this,e);var i=this,n=(this.stats,.75*o.window.width|0),r=e.total,c=s.stdout,u=l("plane","✈"),h=-1,f=0;e.on("start",function(){c.write("\n\n\n  "),a.hide()}),e.on("test end",function(e){var i=-1==h?n*++f/r|0:h;"failed"==e.state&&(u=l("plane crash","✈"),h=i),c.write("["+(n+1)+"D[2A"),c.write(t()),c.write("\n  "),c.write(l("runway",Array(i).join("⋅"))),c.write(u),c.write(l("runway",Array(n-i).join("⋅")+"\n")),c.write(t()),c.write("[0m")}),e.on("end",function(){a.show(),console.log(),i.epilogue()})}function r(){}var o=i("./base"),a=o.cursor,l=o.color;t=e.exports=n,o.colors.plane=0,o.colors["plane crash"]=31,o.colors.runway=90,r.prototype=o.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("reporters/list.js",function(e,t,i){function n(e){o.call(this,e);var t=this,i=(this.stats,0);e.on("start",function(){console.log()}),e.on("test",function(e){s.stdout.write(l("pass","    "+e.fullTitle()+": "))}),e.on("pending",function(e){var t=l("checkmark","  -")+l("pending"," %s");console.log(t,e.fullTitle())}),e.on("pass",function(e){var t=l("checkmark","  "+o.symbols.dot)+l("pass"," %s: ")+l(e.speed,"%dms");a.CR(),console.log(t,e.fullTitle(),e.duration)}),e.on("fail",function(e,t){a.CR(),console.log(l("fail","  %d) %s"),++i,e.fullTitle())}),e.on("end",t.epilogue.bind(t))}function r(){}var o=i("./base"),a=o.cursor,l=o.color;t=e.exports=n,r.prototype=o.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("reporters/markdown.js",function(e,t,i){function n(e){function t(e){return Array(c).join("#")+" "+e}function i(e,t){var n=t,r=a+e.title;return t=t[r]=t[r]||{suite:e},e.suites.forEach(function(e){i(e,t)}),n}function n(e,t){++t;var i,r="";for(var s in e)"suite"!=s&&(s!==a&&(i=" - ["+s.substring(1)+"]",i+="(#"+o.slug(e[s].suite.fullTitle())+")\n",r+=Array(t).join("  ")+i),r+=n(e[s],t));return r}function l(e){var t=i(e,{});return n(t,0)}r.call(this,e);var c=(this.stats,0),u="";
l(e.suite),e.on("suite",function(e){++c;var i=o.slug(e.fullTitle());u+='<a name="'+i+'"></a>\n',u+=t(e.title)+"\n"}),e.on("suite end",function(e){--c}),e.on("pass",function(e){var t=o.clean(e.fn.toString());u+=e.title+".\n",u+="\n```js\n",u+=t+"\n",u+="```\n\n"}),e.on("end",function(){s.stdout.write("# TOC\n"),s.stdout.write(l(e.suite)),s.stdout.write(u)})}var r=i("./base"),o=i("../utils"),a="$";t=e.exports=n}),e.register("reporters/min.js",function(e,t,i){function n(e){o.call(this,e),e.on("start",function(){s.stdout.write("[2J"),s.stdout.write("[1;3H")}),e.on("end",this.epilogue.bind(this))}function r(){}var o=i("./base");t=e.exports=n,r.prototype=o.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("reporters/nyan.js",function(e,t,i){function n(e){a.call(this,e);var t=this,i=(this.stats,.75*a.window.width|0),n=(this.rainbowColors=t.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=i-n,this.scoreboardWidth=5,this.tick=0;e.on("start",function(){a.cursor.hide(),t.draw()}),e.on("pending",function(e){t.draw()}),e.on("pass",function(e){t.draw()}),e.on("fail",function(e,i){t.draw()}),e.on("end",function(){a.cursor.show();for(var e=0;e<t.numberOfLines;e++)r("\n");t.epilogue()})}function r(e){s.stdout.write(e)}function o(){}var a=i("./base");t=e.exports=n,n.prototype.draw=function(){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(),this.tick=!this.tick},n.prototype.drawScoreboard=function(){function e(e,t){r(" "),r(a.color(e,t)),r("\n")}var t=this.stats;e("green",t.passes),e("fail",t.failures),e("pending",t.pending),r("\n"),this.cursorUp(this.numberOfLines)},n.prototype.appendRainbow=function(){for(var e=this.tick?"_":"-",t=this.rainbowify(e),i=0;i<this.numberOfLines;i++){var n=this.trajectories[i];n.length>=this.trajectoryWidthMax&&n.shift(),n.push(t)}},n.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t,i){r("["+e.scoreboardWidth+"C"),r(t.join("")),r("\n")}),this.cursorUp(this.numberOfLines)},n.prototype.drawNyanCat=function(){var e=this,t=this.scoreboardWidth+this.trajectories[0].length,i="["+t+"C",n="";r(i),r("_,------,"),r("\n"),r(i),n=e.tick?"  ":"   ",r("_|"+n+"/\\_/\\ "),r("\n"),r(i),n=e.tick?"_":"__";var s=e.tick?"~":"^";r(s+"|"+n+this.face()+" "),r("\n"),r(i),n=e.tick?" ":"  ",r(n+'""  "" '),r("\n"),this.cursorUp(this.numberOfLines)},n.prototype.face=function(){var e=this.stats;return e.failures?"( x .x)":e.pending?"( o .o)":e.passes?"( ^ .^)":"( - .-)"},n.prototype.cursorUp=function(e){r("["+e+"A")},n.prototype.cursorDown=function(e){r("["+e+"B")},n.prototype.generateColors=function(){for(var e=[],t=0;t<42;t++){var i=Math.floor(Math.PI/3),n=t*(1/6),r=Math.floor(3*Math.sin(n)+3),s=Math.floor(3*Math.sin(n+2*i)+3),o=Math.floor(3*Math.sin(n+4*i)+3);e.push(36*r+6*s+o+16)}return e},n.prototype.rainbowify=function(e){if(!a.useColors)return e;var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+t+"m"+e+"[0m"},o.prototype=a.prototype,n.prototype=new o,n.prototype.constructor=n}),e.register("reporters/progress.js",function(e,t,i){function n(e,t){o.call(this,e);var i=this,t=t||{},n=(this.stats,.5*o.window.width|0),r=e.total,c=0,u=(Math.max,-1);t.open=t.open||"[",t.complete=t.complete||"▬",t.incomplete=t.incomplete||o.symbols.dot,t.close=t.close||"]",t.verbose=!1,e.on("start",function(){console.log(),a.hide()}),e.on("test end",function(){c++;var e=c/r,i=n*e|0,o=n-i;(u!==i||t.verbose)&&(u=i,a.CR(),s.stdout.write("[J"),s.stdout.write(l("progress","  "+t.open)),s.stdout.write(Array(i).join(t.complete)),s.stdout.write(Array(o).join(t.incomplete)),s.stdout.write(l("progress",t.close)),t.verbose&&s.stdout.write(l("progress"," "+c+" of "+r)))}),e.on("end",function(){a.show(),console.log(),i.epilogue()})}function r(){}var o=i("./base"),a=o.cursor,l=o.color;t=e.exports=n,o.colors.progress=90,r.prototype=o.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("reporters/spec.js",function(e,t,i){function n(e){function t(){return Array(n).join("  ")}s.call(this,e);var i=this,n=(this.stats,0),r=0;e.on("start",function(){console.log()}),e.on("suite",function(e){++n,console.log(a("suite","%s%s"),t(),e.title)}),e.on("suite end",function(e){--n,1==n&&console.log()}),e.on("pending",function(e){var i=t()+a("pending","  - %s");console.log(i,e.title)}),e.on("pass",function(e){if("fast"==e.speed){var i=t()+a("checkmark","  "+s.symbols.ok)+a("pass"," %s ");o.CR(),console.log(i,e.title)}else{var i=t()+a("checkmark","  "+s.symbols.ok)+a("pass"," %s ")+a(e.speed,"(%dms)");o.CR(),console.log(i,e.title,e.duration)}}),e.on("fail",function(e,i){o.CR(),console.log(t()+a("fail","  %d) %s"),++r,e.title)}),e.on("end",i.epilogue.bind(i))}function r(){}var s=i("./base"),o=s.cursor,a=s.color;t=e.exports=n,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("reporters/tap.js",function(e,t,i){function n(e){s.call(this,e);var t=(this.stats,1),i=0,n=0;e.on("start",function(){var t=e.grepTotal(e.suite);console.log("%d..%d",1,t)}),e.on("test end",function(){++t}),e.on("pending",function(e){console.log("ok %d %s # SKIP -",t,r(e))}),e.on("pass",function(e){i++,console.log("ok %d %s",t,r(e))}),e.on("fail",function(e,i){n++,console.log("not ok %d %s",t,r(e)),i.stack&&console.log(i.stack.replace(/^/gm,"  "))}),e.on("end",function(){console.log("# tests "+(i+n)),console.log("# pass "+i),console.log("# fail "+n)})}function r(e){return e.fullTitle().replace(/#/g,"")}var s=i("./base");s.cursor,s.color;t=e.exports=n}),e.register("reporters/xunit.js",function(e,t,n){function r(e,t){l.call(this,e);var i=this.stats,n=[],r=this;if(t.reporterOptions&&t.reporterOptions.output){if(!u.createWriteStream)throw new Error("file output not supported in browser");r.fileStream=u.createWriteStream(t.reporterOptions.output)}e.on("pending",function(e){n.push(e)}),e.on("pass",function(e){n.push(e)}),e.on("fail",function(e){n.push(e)}),e.on("end",function(){r.write(o("testsuite",{name:"Mocha Tests",tests:i.tests,failures:i.failures,errors:i.failures,skipped:i.tests-i.failures-i.passes,timestamp:(new f).toUTCString(),time:i.duration/1e3||0},!1)),n.forEach(function(e){r.test(e)}),r.write("</testsuite>")})}function s(){}function o(e,t,i,n){var r,s=i?"/>":">",o=[];for(var a in t)o.push(a+'="'+h(t[a])+'"');return r="<"+e+(o.length?" "+o.join(" "):"")+s,n&&(r+=n+"</"+e+s),r}function a(e){return"<![CDATA["+h(e)+"]]>"}var l=n("./base"),c=n("../utils"),u=n("browser/fs"),h=c.escape,f=i.Date;i.setTimeout,i.setInterval,i.clearTimeout,i.clearInterval;t=e.exports=r,r.prototype.done=function(e,t){this.fileStream?this.fileStream.end(function(){t(e)}):t(e)},s.prototype=l.prototype,r.prototype=new s,r.prototype.constructor=r,r.prototype.write=function(e){this.fileStream?this.fileStream.write(e+"\n"):console.log(e)},r.prototype.test=function(e,t){var i={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3||0};if("failed"==e.state){var n=e.err;this.write(o("testcase",i,!1,o("failure",{},!1,a(h(n.message)+"\n"+n.stack))))}else e.pending?this.write(o("testcase",i,!1,o("skipped",{},!0))):this.write(o("testcase",i,!0))}}),e.register("runnable.js",function(e,t,n){function r(e,t){this.title=e,this.fn=t,this.async=t&&t.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this._enableTimeouts=!0,this.timedOut=!1,this._trace=new Error("done() called multiple times")}function s(){}var o=n("browser/events").EventEmitter,a=n("browser/debug")("mocha:runnable"),l=n("./ms"),c=n("./utils"),u=i.Date,h=i.setTimeout,f=(i.setInterval,i.clearTimeout),d=(i.clearInterval,Object.prototype.toString);e.exports=r,s.prototype=o.prototype,r.prototype=new s,r.prototype.constructor=r,r.prototype.timeout=function(e){return 0==arguments.length?this._timeout:(0===e&&(this._enableTimeouts=!1),"string"==typeof e&&(e=l(e)),a("timeout %d",e),this._timeout=e,this.timer&&this.resetTimeout(),this)},r.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=l(e)),a("timeout %d",e),this._slow=e,this)},r.prototype.enableTimeouts=function(e){return 0===arguments.length?this._enableTimeouts:(a("enableTimeouts %s",e),this._enableTimeouts=e,this)},r.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},r.prototype.clearTimeout=function(){f(this.timer)},r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_"!=e[0])return"parent"==e?"#<Suite>":"ctx"==e?"#<Context>":t},2)},r.prototype.resetTimeout=function(){var e=this,t=this.timeout()||1e9;this._enableTimeouts&&(this.clearTimeout(),this.timer=h(function(){e._enableTimeouts&&(e.callback(new Error("timeout of "+t+"ms exceeded")),e.timedOut=!0)},t))},r.prototype.globals=function(e){this._allowedGlobals=e},r.prototype.run=function(e){function t(e){s||(s=!0,o.emit("error",e||new Error("done() called multiple times; stacktrace may be inaccurate")))}function i(i){var n=o.timeout();if(!o.timedOut){if(r)return t(i||o._trace);o.clearTimeout(),o.duration=new u-a,r=!0,!i&&o.duration>n&&o._enableTimeouts&&(i=new Error("timeout of "+n+"ms exceeded")),e(i)}}function n(e){var t=e.call(l);t&&"function"==typeof t.then?(o.resetTimeout(),t.then(function(){i()},function(e){i(e||new Error("Promise rejected with no or falsy reason"))})):i()}var r,s,o=this,a=new u,l=this.ctx;if(l&&l.runnable&&l.runnable(this),this.callback=i,this.async){this.resetTimeout();try{this.fn.call(l,function(e){return e instanceof Error||"[object Error]"===d.call(e)?i(e):null!=e?i("[object Object]"===Object.prototype.toString.call(e)?new Error("done() invoked with non-Error: "+JSON.stringify(e)):new Error("done() invoked with non-Error: "+e)):void i()})}catch(h){i(c.getError(h))}}else{if(this.asyncOnly)return i(new Error("--async-only option in use without declaring `done()`"));try{this.pending?i():n(this.fn)}catch(h){i(c.getError(h))}}}}),e.register("runner.js",function(e,t,n){function r(e){var t=this;this._globals=[],this._abort=!1,this.suite=e,this.total=e.total(),this.failures=0,this.on("test end",function(e){t.checkGlobals(e)}),this.on("hook end",function(e){t.checkGlobals(e)}),this.grep(/.*/),this.globals(this.globalProps().concat(l()))}function o(){}function a(e,t){return f(t,function(t){if(/^d+/.test(t))return!1;if(i.navigator&&/^getInterface/.test(t))return!1;if(i.navigator&&/^\d+/.test(t))return!1;if(/^mocha-/.test(t))return!1;var n=f(e,function(e){return~e.indexOf("*")?0==t.indexOf(e.split("*")[0]):t==e});return 0==n.length&&(!i.navigator||"onerror"!==t)})}function l(){if("object"==typeof s&&"string"==typeof s.version){var e=s.version.split(".").reduce(function(e,t){return e<<8|t});if(e<2315)return["errno"]}return[]}var c=n("browser/events").EventEmitter,u=n("browser/debug")("mocha:runner"),h=(n("./test"),n("./utils")),f=h.filter,d=(h.keys,["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date","setImmediate","clearImmediate"]);e.exports=r,r.immediately=i.setImmediate||s.nextTick,o.prototype=c.prototype,r.prototype=new o,r.prototype.constructor=r,r.prototype.grep=function(e,t){return u("grep %s",e),this._grep=e,this._invert=t,this.total=this.grepTotal(this.suite),this},r.prototype.grepTotal=function(e){var t=this,i=0;return e.eachTest(function(e){var n=t._grep.test(e.fullTitle());t._invert&&(n=!n),n&&i++}),i},r.prototype.globalProps=function(){for(var e=h.keys(i),t=0;t<d.length;++t)~h.indexOf(e,d[t])||e.push(d[t]);return e},r.prototype.globals=function(e){return 0==arguments.length?this._globals:(u("globals %j",e),this._globals=this._globals.concat(e),this)},r.prototype.checkGlobals=function(e){if(!this.ignoreLeaks){var t,i=this._globals,n=this.globalProps();e&&(i=i.concat(e._allowedGlobals||[])),this.prevGlobalsLength!=n.length&&(this.prevGlobalsLength=n.length,t=a(i,n),this._globals=this._globals.concat(t),t.length>1?this.fail(e,new Error("global leaks detected: "+t.join(", "))):t.length&&this.fail(e,new Error("global leak detected: "+t[0])))}},r.prototype.fail=function(e,t){++this.failures,e.state="failed","string"==typeof t&&(t=new Error('the string "'+t+'" was thrown, throw an Error :)')),this.emit("fail",e,t)},r.prototype.failHook=function(e,t){this.fail(e,t),this.suite.bail()&&this.emit("end")},r.prototype.hook=function(e,t){function i(e){var n=s[e];return n?(o.currentRunnable=n,n.ctx.currentTest=o.test,o.emit("hook",n),n.on("error",function(e){o.failHook(n,e)}),void n.run(function(r){n.removeAllListeners("error");var s=n.error();return s&&o.fail(o.test,s),r?(o.failHook(n,r),t(r)):(o.emit("hook end",n),delete n.ctx.currentTest,void i(++e))})):t()}var n=this.suite,s=n["_"+e],o=this;r.immediately(function(){i(0)})},r.prototype.hooks=function(e,t,i){function n(o){return r.suite=o,o?void r.hook(e,function(e){if(e){var o=r.suite;return r.suite=s,i(e,o)}n(t.pop())}):(r.suite=s,i())}var r=this,s=this.suite;n(t.pop())},r.prototype.hookUp=function(e,t){var i=[this.suite].concat(this.parents()).reverse();this.hooks(e,i,t)},r.prototype.hookDown=function(e,t){var i=[this.suite].concat(this.parents());this.hooks(e,i,t)},r.prototype.parents=function(){for(var e=this.suite,t=[];e=e.parent;)t.push(e);return t},r.prototype.runTest=function(e){var t=this.test,i=this;this.asyncOnly&&(t.asyncOnly=!0);try{t.on("error",function(e){i.fail(t,e)}),t.run(e)}catch(n){e(n)}},r.prototype.runTests=function(e,t){function i(e,n,r){var o=s.suite;s.suite=r?n.parent:n,s.suite?s.hookUp("afterEach",function(e,r){return s.suite=o,e?i(e,r,!0):void t(n)}):(s.suite=o,t(n))}function n(a,l){if(s.failures&&e._bail)return t();if(s._abort)return t();if(a)return i(a,l,!0);if(r=o.shift(),!r)return t();var c=s._grep.test(r.fullTitle());return s._invert&&(c=!c),c?r.pending?(s.emit("pending",r),s.emit("test end",r),n()):(s.emit("test",s.test=r),void s.hookDown("beforeEach",function(e,t){return e?i(e,t,!1):(s.currentRunnable=s.test,void s.runTest(function(e){return r=s.test,e?(s.fail(r,e),s.emit("test end",r),s.hookUp("afterEach",n)):(r.state="passed",s.emit("pass",r),s.emit("test end",r),void s.hookUp("afterEach",n))}))})):n()}var r,s=this,o=e.tests.slice();this.next=n,n()},r.prototype.runSuite=function(e,t){function i(t){if(t)return t==e?n():n(t);if(s._abort)return n();var r=e.suites[o++];return r?void s.runSuite(r,i):n()}function n(i){s.suite=e,s.hook("afterAll",function(){s.emit("suite end",e),t(i)})}var r=this.grepTotal(e),s=this,o=0;return u("run suite %s",e.fullTitle()),r?(this.emit("suite",this.suite=e),void this.hook("beforeAll",function(t){return t?n():void s.runTests(e,i)})):t()},r.prototype.uncaught=function(e){e?u("uncaught exception %s",e!==function(){return this}.call(e)?e:e.message||e):(u("uncaught undefined exception"),e=h.undefinedError()),e.uncaught=!0;var t=this.currentRunnable;if(t){var i=t.state;if(this.fail(t,e),t.clearTimeout(),!i)return"test"==t.type?(this.emit("test end",t),void this.hookUp("afterEach",this.next)):void this.emit("end")}},r.prototype.run=function(e){function t(e){i.uncaught(e)}var i=this,e=e||function(){};return u("start"),this.on("end",function(){u("end"),s.removeListener("uncaughtException",t),e(i.failures)}),this.emit("start"),this.runSuite(this.suite,function(){u("finished running"),i.emit("end")}),s.on("uncaughtException",t),this},r.prototype.abort=function(){u("aborting"),this._abort=!0}}),e.register("suite.js",function(e,t,i){function n(e,t){this.title=e;var i=function(){};i.prototype=t,this.ctx=new i,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!e,this._timeout=2e3,this._enableTimeouts=!0,this._slow=75,this._bail=!1}function r(){}var s=i("browser/events").EventEmitter,o=i("browser/debug")("mocha:suite"),a=i("./ms"),l=i("./utils"),c=i("./hook");t=e.exports=n,t.create=function(e,t){var i=new n(t,e.ctx);return i.parent=e,e.pending&&(i.pending=!0),t=i.fullTitle(),e.addSuite(i),i},r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n,n.prototype.clone=function(){var e=new n(this.title);return o("clone"),e.ctx=this.ctx,e.timeout(this.timeout()),e.enableTimeouts(this.enableTimeouts()),e.slow(this.slow()),e.bail(this.bail()),e},n.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("0"===e.toString()&&(this._enableTimeouts=!1),"string"==typeof e&&(e=a(e)),o("timeout %d",e),this._timeout=parseInt(e,10),this)},n.prototype.enableTimeouts=function(e){return 0===arguments.length?this._enableTimeouts:(o("enableTimeouts %s",e),this._enableTimeouts=e,this)},n.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=a(e)),o("slow %d",e),this._slow=e,this)},n.prototype.bail=function(e){return 0==arguments.length?this._bail:(o("bail %s",e),this._bail=e,this)},n.prototype.beforeAll=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"before all" hook'+(e?": "+e:"");var i=new c(e,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._beforeAll.push(i),this.emit("beforeAll",i),this},n.prototype.afterAll=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"after all" hook'+(e?": "+e:"");var i=new c(e,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._afterAll.push(i),this.emit("afterAll",i),this},n.prototype.beforeEach=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"before each" hook'+(e?": "+e:"");var i=new c(e,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._beforeEach.push(i),this.emit("beforeEach",i),this},n.prototype.afterEach=function(e,t){if(this.pending)return this;"function"==typeof e&&(t=e,e=t.name),e='"after each" hook'+(e?": "+e:"");var i=new c(e,t);return i.parent=this,i.timeout(this.timeout()),i.enableTimeouts(this.enableTimeouts()),i.slow(this.slow()),i.ctx=this.ctx,this._afterEach.push(i),this.emit("afterEach",i),this},n.prototype.addSuite=function(e){return e.parent=this,e.timeout(this.timeout()),e.enableTimeouts(this.enableTimeouts()),e.slow(this.slow()),e.bail(this.bail()),this.suites.push(e),this.emit("suite",e),this},n.prototype.addTest=function(e){return e.parent=this,e.timeout(this.timeout()),e.enableTimeouts(this.enableTimeouts()),e.slow(this.slow()),e.ctx=this.ctx,this.tests.push(e),this.emit("test",e),this},n.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title},n.prototype.total=function(){return l.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length},n.prototype.eachTest=function(e){return l.forEach(this.tests,e),l.forEach(this.suites,function(t){t.eachTest(e)}),this}}),e.register("test.js",function(e,t,i){function n(e,t){s.call(this,e,t),this.pending=!t,this.type="test"}function r(){}var s=i("./runnable");e.exports=n,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),e.register("utils.js",function(e,t,i){function n(e){return!~f.indexOf(e)}function r(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew[ \t]+(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var s=i("browser/fs"),o=i("browser/path"),a=o.basename,l=s.existsSync||o.existsSync,c=i("browser/glob"),u=o.join,h=i("browser/debug")("mocha:watch"),f=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.forEach=function(e,t,i){for(var n=0,r=e.length;n<r;n++)t.call(i,e[n],n)},t.map=function(e,t,i){for(var n=[],r=0,s=e.length;r<s;r++)n.push(t.call(i,e[r],r));return n},t.indexOf=function(e,t,i){for(var n=i||0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.reduce=function(e,t,i){for(var n=i,r=0,s=e.length;r<s;r++)n=t(n,e[r],r,e);return n},t.filter=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++){var s=e[n];t(s,n,e)&&i.push(s)}return i},t.keys=Object.keys||function(e){var t=[],i=Object.prototype.hasOwnProperty;for(var n in e)i.call(e,n)&&t.push(n);return t},t.watch=function(e,t){var i={interval:100};e.forEach(function(e){h("file %s",e),s.watchFile(e,i,function(i,n){n.mtime<i.mtime&&t(e)})})},t.files=function(e,i,r){r=r||[],i=i||["js"];var o=new RegExp("\\.("+i.join("|")+")$");return s.readdirSync(e).filter(n).forEach(function(n){n=u(e,n),s.statSync(n).isDirectory()?t.files(n,i,r):n.match(o)&&r.push(n)}),r},t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},t.clean=function(e){e=e.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,"").replace(/^function *\(.*\) *{|\(.*\) *=> *{?/,"").replace(/\s+\}$/,"");var i=e.match(/^\n?( *)/)[1].length,n=e.match(/^\n?(\t*)/)[1].length,r=new RegExp("^\n?"+(n?"\t":" ")+"{"+(n?n:i)+"}","gm");return e=e.replace(r,""),t.trim(e)},t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.parseQuery=function(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var i=t.indexOf("="),n=t.slice(0,i),r=t.slice(++i);return e[n]=decodeURIComponent(r),e},{})},t.highlightTags=function(e){for(var t=document.getElementById("mocha").getElementsByTagName(e),i=0,n=t.length;i<n;++i)t[i].innerHTML=r(t[i].innerHTML)};var d=function(e,i){switch(i=i||t.type(e)){case"function":return"[Function]";case"object":return"{}";case"array":return"[]";default:return e.toString()}};t.type=function(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?"buffer":Object.prototype.toString.call(e).replace(/^\[.+\s(.+?)\]$/,"$1").toLowerCase()},t.stringify=function(e){var i,n=t.type(e);if("null"===n||"undefined"===n)return"["+n+"]";if("date"===n)return"[Date: "+e.toISOString()+"]";if(!~t.indexOf(["object","array","function"],n))return e.toString();for(i in e)if(e.hasOwnProperty(i))return JSON.stringify(t.canonicalize(e),null,2).replace(/,(\n|$)/g,"$1");return d(e,n)},t.isBuffer=function(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)},t.canonicalize=function(e,i){var n,r,s=t.type(e),o=function(e,t){i.push(e),t(),i.pop()};if(i=i||[],t.indexOf(i,e)!==-1)return"[Circular]";switch(s){case"undefined":n="[undefined]";break;case"buffer":case"null":n=e;break;case"array":o(e,function(){n=t.map(e,function(e){return t.canonicalize(e,i)})});break;case"date":n="[Date: "+e.toISOString()+"]";break;case"function":for(r in e){n={};break}if(!n){n=d(e,s);break}case"object":n=n||{},o(e,function(){t.forEach(t.keys(e).sort(),function(r){n[r]=t.canonicalize(e[r],i)})});break;case"number":case"boolean":n=e;break;default:n=e.toString()}return n},t.lookupFiles=function p(e,t,i){var n=[],r=new RegExp("\\.("+t.join("|")+")$");if(!l(e)){if(!l(e+".js")){if(n=c.sync(e),!n.length)throw new Error("cannot resolve path (or pattern) '"+e+"'");return n}e+=".js"}try{var o=s.statSync(e);if(o.isFile())return e}catch(h){return}return s.readdirSync(e).forEach(function(o){o=u(e,o);try{var l=s.statSync(o);if(l.isDirectory())return void(i&&(n=n.concat(p(o,t,i))))}catch(c){return}l.isFile()&&r.test(o)&&"."!==a(o)[0]&&n.push(o)}),n},t.undefinedError=function(){return new Error("Caught undefined error, did you throw without specifying what?")},t.getError=function(e){return e||t.undefinedError()}});var i=function(){return this}(),n=i.Date,r=i.setTimeout,s=(i.setInterval,i.clearTimeout,i.clearInterval,{});s.exit=function(e){},s.stdout={};var o=[],a=i.onerror;s.removeListener=function(e,t){if("uncaughtException"==e){a?i.onerror=a:i.onerror=function(){};var n=l.utils.indexOf(o,t);n!=-1&&o.splice(n,1)}},s.on=function(e,t){"uncaughtException"==e&&(i.onerror=function(e,i,n){return t(new Error(e+" ("+i+":"+n+")")),!0},o.push(t))};var l=i.Mocha=e("mocha"),c=i.mocha=new l({reporter:"html"});c.suite.removeAllListeners("pre-require");var u,h=[];l.Runner.immediately=function(e){h.push(e),u||(u=r(t,0))},c.throwError=function(e){throw l.utils.forEach(o,function(t){t(e)}),e},c.ui=function(e){return l.prototype.ui.call(this,e),this.suite.emit("pre-require",i,null,this),this},c.setup=function(e){"string"==typeof e&&(e={ui:e});for(var t in e)this[t](e[t]);return this},c.run=function(e){var t=c.options;c.globals("location");var n=l.utils.parseQuery(i.location.search||"");return n.grep&&c.grep(n.grep),n.invert&&c.invert(),l.prototype.run.call(c,function(n){var r=i.document;r&&r.getElementById("mocha")&&t.noHighlighting!==!0&&l.utils.highlightTags("code"),e&&e(n)})},l.process=s}();